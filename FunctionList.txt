================================================================
DISCORD BOT ‚Äì COMMANDS & INTERNAL SYSTEMS
================================================================
üîí Global Requirements for ALL Commands

Every command MUST enforce:

Guild ID validation

Role + permission validation

User existence or auto-registration

Rate limiting / cooldowns

Atomic balance + inventory + task updates

Data sync to backend via WebSocket/SSE event

Error handling with fallback DM

Structured logging with unique request IDs

Frontend event sync after every change

============================
CURRENCY SYSTEM
============================
/balance

Must auto-create user account if missing

Must show cached balance AND force backend revalidation

Must include stale-cache fallback if backend unreachable

Must support cross-guild balances cleanly

Must send SSE event user.balance.update

/daily

Must enforce per-guild cooldown stored in persistent DB

Must include fraud detection (timezone abuse, resets)

Must log transaction atomically

Must re-sync to CMS immediately

/give_money

Enforce no negative transfers

Balance update must be atomic (two-user write)

Log two transactions (debit + credit)

/leaderboard

Fetch from backend with pagination

Cache results per-guild for 30s to avoid spam

Must ignore users marked inactive

/buy

Requires item lock to prevent double stock-depletion

Must update:

user balance

item stock

user inventory

transaction logs
all atomically

Must fail gracefully if stock changes mid-purchase

/shop

Must include search + category filters

Must fetch from backend, not local cache

Pagination must persist page state per user session

/inventory

Must merge inventory + shop item data on-demand

Must include total resale value if allowed

/view_tasks

Must only show tasks available in the guild & channel

Must filter by task cooldown + prerequisites

/claim

Must enforce per-user claim limits

Must verify task has not been soft-deleted in backend

/mytasks

Must show:

Pending tasks

Completed tasks

Expired tasks

Rejected tasks

/transactions

Must paginate and show up to 50 entries

Must warn if user has more (e.g., ‚ÄúLoad in CMS‚Äù)

============================
TASK SYSTEM
============================
/task_submit

Must enforce attachment validation

Must send a review queue event to admins

Must store immutable proof snapshot

/tasks

Must filter by:

assigned to user

category

expired

unclaimed

Must hide admin-only tasks

/task_assign

Must check:

If user already has active tasks

If task is claimable

/task_archive

Archives:

DB record

Discord messages

CMS entries

============================
ADMIN COMMANDS
============================

All must enforce:

Admin role OR manual override token

Logging to /api/logs

Syncing to all connected CMS sessions via SSE

Includes improvements such as:

/setprefix stored per server

/reinitialize automatically repopulates:

tasks

embeds

announcements

shop items

roles

/validate performs:

orphan user check

missing transaction entries

broken stock entries

tasks missing owner

embeds missing Discord message IDs

============================
SHOP MANAGEMENT
============================
/additem

Must enforce unique ID

Must auto-create Discord listing

Must rollback if Discord API fails

/updateitem

Must sync to:

Database

Frontend cache

Active Discord message

/restock

Must prevent negative stock

Must lock stock during update

/shopstats

Must compute:

Most purchased items

Revenue generated

Stock movement

Abandoned carts (attempted but failed purchases)

/completetask

Must prevent awarding reward twice

Must auto-log transaction

============================
ANNOUNCEMENTS & EMBEDS
============================

Critical requirements:

Store Discord messageID for updates

Validate channel permissions

Create rollback if message deletion fails

================================================================
FLASK BACKEND ‚Äì API ENDPOINTS (PRODUCTION-GRADE)
================================================================
üîê Must enforce secure:

JWT access + refresh tokens

IP rate limiting

CORS restrictions

Admin token for override endpoints

Audit logging (userID, route, IP, body hash)

üîÑ Must use:

Full atomic data operations

Data versioning to prevent stale overwrites

Cache invalidation on every change

============================
USER MANAGEMENT API
============================

Improved requirements:

Sorting must support:

last_active

total_spent

total_tasks

User details should include:

balance history

inventory summary

disciplinary flags

PUT /balance must detect:

Desync

Missing transaction

Negative resulting balance

============================
SHOP MANAGEMENT API
============================

Must support:

Soft-delete + restore

Real-time updates via SSE

Stock lock before purchase

SKU indexing for faster searches

============================
TASK MANAGEMENT API
============================

Must enforce:

Task expiration scanning every minute

Auto-unclaim expired tasks

Proof storage with hash verification

============================
TRANSACTIONS
============================

Must implement:

Fraud detection (rapid transfers, repeated purchases)

Historical hashing (tamper-evident logs)

CSV exports with signed checksum

================================================================
FRONTEND JAVASCRIPT (CMS) ‚Äî HARDENED VERSION
================================================================

Every frontend action must:

Validate admin permissions

Retry failed requests with exponential backoff

Sync live data through SSE events

Show desync warnings when backend vs. local cache mismatch

Detect missing/invalid API responses

Use optimistic UI updates ONLY when safe

================================================================
CORE SYSTEM
================================================================

Every manager now must:

‚úî Prevent corruption
‚úî Prevent partial writes
‚úî Maintain per-guild cache
‚úî Force consistency with backend
‚úî Provide cross-service recovery tools

Additions:

DataManager

File-locking

Data versioning

Auto-repair from backups

Cold-start guild loading

TransactionManager

Dual-write validation

Hash-chains for tamper-proof logs

ShopManager

Stock-change atomic locks

Price-change history tracking

TaskManager

Expiration scheduler

Assignment/change event dispatcher

Proof hashing

==================================
Category: Profanity & Link Protection

Function: load_protection_config()
File: core/moderation/protection_manager.py
Params: guild_id
Description: Loads profanity/link protection settings for a guild (levels, whitelist, blacklist, auto-actions). Reads persistent store and caches config.
Inputs: guild_id
Outputs: protection_config dict
Side effects: populates in-memory cache

Function: save_protection_config()
File: core/moderation/protection_manager.py
Params: guild_id, protection_config
Description: Persists updated protection settings to DB/storage and updates cache.
Inputs: guild_id, protection_config
Outputs: success boolean
Side effects: writes DB, triggers SSE config update

Function: get_profanity_list()
File: core/moderation/protection_manager.py
Params: guild_id
Description: Returns the effective profanity list for the guild (merged default + custom blacklist).
Inputs: guild_id
Outputs: list[str]
Side effects: none (reads cache/DB)

Function: add_profanity_word()
File: core/moderation/protection_manager.py
Params: guild_id, word, admin_id
Description: Adds a word/phrase to guild blacklist with metadata (added_by, timestamp).
Inputs: guild_id, word, admin_id
Outputs: updated list or success boolean
Side effects: writes DB, logs action, triggers SSE

Function: remove_profanity_word()
File: core/moderation/protection_manager.py
Params: guild_id, word, admin_id
Description: Removes a word from guild blacklist.
Inputs: guild_id, word, admin_id
Outputs: updated list or success boolean
Side effects: writes DB, logs action, triggers SSE

Function: get_link_whitelist()
File: core/moderation/protection_manager.py
Params: guild_id
Description: Returns permitted domains/URL patterns for links (domain and regex whitelist).
Inputs: guild_id
Outputs: list[str|regex]
Side effects: none

Function: add_whitelist_domain()
File: core/moderation/protection_manager.py
Params: guild_id, domain_or_regex, admin_id
Description: Adds domain or pattern to whitelist to allow links from trusted sources.
Inputs: guild_id, domain_or_regex, admin_id
Outputs: success boolean
Side effects: updates DB, triggers SSE

Function: remove_whitelist_domain()
File: core/moderation/protection_manager.py
Params: guild_id, domain_or_regex, admin_id
Description: Removes domain/pattern from whitelist.
Inputs: guild_id, domain_or_regex, admin_id
Outputs: success boolean
Side effects: updates DB, triggers SSE

Function: is_exempt_from_protection()
File: core/moderation/protection_manager.py
Params: guild_id, user_id, channel_id, roles
Description: Determines if a message author or channel is exempt (admin role, mod role, channel whitelist, explicit user bypass).
Inputs: guild_id, user_id, channel_id, roles
Outputs: boolean (True if exempt)
Side effects: none

Function: scan_message_for_profanity()
File: core/moderation/scanner.py
Params: guild_id, message_content
Description: Scans text content against profanity list using normalized matching (casefold, unicode normalize, word boundaries) and returns matches with indices.
Inputs: guild_id, message_content
Outputs: list of match objects {word, start, end, severity}
Side effects: none

Function: scan_message_for_links()
File: core/moderation/scanner.py
Params: guild_id, message_content
Description: Extracts URLs from text and classifies them (domain, tld, protocol) and checks against whitelist/blacklist patterns.
Inputs: guild_id, message_content
Outputs: list of link objects {url, domain, is_whitelisted}
Side effects: none

Function: scan_attachments_and_embeds()
File: core/moderation/scanner.py
Params: guild_id, message (discord.Message)
Description: Inspects attachments and embed URLs for links and forbidden content; extracts text from images if OCR enabled/available.
Inputs: guild_id, message
Outputs: list of violations found
Side effects: may trigger async OCR job if configured

Function: evaluate_protection_action()
File: core/moderation/enforcer.py
Params: guild_id, message, matches, links
Description: Based on guild protection config and severity, decides action (ignore, redact, delete, warn, mute, temp_ban, escalate to mod queue) and returns action plan.
Inputs: guild_id, message, matches, links
Outputs: action_plan dict {action, reason, severity, notify}
Side effects: none (decision only)

Function: apply_protection_action()
File: core/moderation/enforcer.py
Params: action_plan, message, moderator_context
Description: Executes the decided action: delete/redact message, create strike, DM user, apply temporary mute/roles, escalate to moderators, add audit log, and trigger SSE/Discord notification.
Inputs: action_plan, message, moderator_context
Outputs: result dict {success, details}
Side effects: edits/deletes Discord messages, modifies roles, writes DB, logs event, triggers SSE

Function: redact_message_content()
File: core/moderation/enforcer.py
Params: message, match_ranges
Description: Replaces offensive substrings with safe placeholder (e.g., ‚ñà‚ñà‚ñà) by editing the message or posting sanitized copy if edit not allowed.
Inputs: message, match_ranges
Outputs: sanitized_text or edit_result
Side effects: may call Discord API to edit or send replacement message

Function: warn_user()
File: core/moderation/actions.py
Params: guild_id, user_id, reason, moderator_id, auto_generated
Description: Issues a warning to user via DM and logs a strike in DB (with expiration if configured).
Inputs: guild_id, user_id, reason, moderator_id, auto_generated
Outputs: warning_record
Side effects: sends DM, writes DB, triggers SSE

Function: add_strike()
File: core/moderation/actions.py
Params: guild_id, user_id, reason, moderator_id
Description: Adds a strike record and evaluates escalation thresholds (mute, temp ban, ban).
Inputs: guild_id, user_id, reason, moderator_id
Outputs: strike_record, escalation boolean
Side effects: writes DB, may call moderation actions

Function: remove_strike()
File: core/moderation/actions.py
Params: guild_id, user_id, strike_id, moderator_id
Description: Removes a strike (manual) and logs action.
Inputs: guild_id, user_id, strike_id, moderator_id
Outputs: success boolean
Side effects: writes DB, triggers SSE

Function: apply_temporary_mute()
File: core/moderation/actions.py
Params: guild_id, user_id, duration_seconds, reason, moderator_id
Description: Applies mute role or timeout via Discord API for the specified duration and schedules unmute.
Inputs: guild_id, user_id, duration_seconds, reason, moderator_id
Outputs: success boolean
Side effects: modifies roles/timeouts, writes DB, schedules unmute job

Function: schedule_unmute_job()
File: core/moderation/scheduler.py
Params: guild_id, user_id, unmute_timestamp
Description: Ensures temporary mutes are automatically removed at the scheduled time (persistent across restarts).
Inputs: guild_id, user_id, unmute_timestamp
Outputs: job_id
Side effects: schedules job in persistent job store

Function: quarantine_message()
File: core/moderation/enforcer.py
Params: message, reason
Description: Moves or copies message content to a moderator-only channel or storage for review instead of immediate deletion.
Inputs: message, reason
Outputs: quarantine_record
Side effects: posts to mod channel, writes DB, triggers SSE

Function: create_moderation_audit_log()
File: core/moderation/logger.py
Params: guild_id, action, user_id, moderator_id, message_id, details
Description: Records moderation actions with unique IDs for audits and undo capability.
Inputs: guild_id, action, user_id, moderator_id, message_id, details
Outputs: audit_log_record
Side effects: writes DB, triggers SSE

Function: handle_message_create_protection()
File: cogs/moderation.py
Params: message (discord.Message)
Description: Primary message listener hook that coordinates scanning, exemption checks, evaluation, and applying protection actions asynchronously.
Inputs: message
Outputs: None (side effects only)
Side effects: may edit/delete message, send DMs, write DB, schedule jobs, send SSE

Function: command_add_profanity()
File: cogs/moderation_commands.py
Params: interaction, word
Description: Slash command for admins to add profanity entries (aliases, regex, severity).
Inputs: interaction, word
Outputs: command response
Side effects: calls add_profanity_word(), logs action, updates cache

Function: command_remove_profanity()
File: cogs/moderation_commands.py
Params: interaction, word
Description: Slash command for admins to remove profanity entries.
Inputs: interaction, word
Outputs: command response
Side effects: calls remove_profanity_word(), logs action, updates cache

Function: command_list_profanity()
File: cogs/moderation_commands.py
Params: interaction, page (optional)
Description: Admin command to paginate and view current blacklist and custom rules.
Inputs: interaction, page
Outputs: paginated embed/list
Side effects: none

Function: command_add_whitelist()
File: cogs/moderation_commands.py
Params: interaction, domain_or_regex
Description: Slash command to add a whitelisted domain/pattern.
Inputs: interaction, domain_or_regex
Outputs: command response
Side effects: calls add_whitelist_domain(), logs action

Function: command_remove_whitelist()
File: cogs/moderation_commands.py
Params: interaction, domain_or_regex
Description: Slash command to remove whitelisted domain/pattern.
Inputs: interaction, domain_or_regex
Outputs: command response
Side effects: calls remove_whitelist_domain(), logs action

Function: command_set_protection_level()
File: cogs/moderation_commands.py
Params: interaction, level
Description: Admin command to set protection strictness (off, monitor, moderate, strict).
Inputs: interaction, level
Outputs: command response
Side effects: updates protection_config, triggers SSE

Function: api_get_protection_config()
File: backend.py
Params: guild_id
Description: API endpoint used by CMS to retrieve current protection config.
Inputs: guild_id
Outputs: protection_config JSON
Side effects: reads DB/cache

Function: api_update_protection_config()
File: backend.py
Params: guild_id, protection_config, admin_token
Description: API endpoint for CMS to update protection settings; enforces admin auth and validation.
Inputs: guild_id, protection_config, admin_token
Outputs: success boolean + updated config
Side effects: writes DB, triggers SSE

Function: moderation_health_check()
File: core/moderation/health.py
Params: None
Description: Verifies scheduler, job queue, DB connectivity, and rule cache integrity for moderation subsystem.
Inputs: None
Outputs: health report dict
Side effects: none

Function: export_moderation_logs()
File: backend.py
Params: guild_id, start_date, end_date, format
Description: Exports moderation/audit logs for compliance or review; supports CSV/JSON with hashed integrity.
Inputs: guild_id, start_date, end_date, format
Outputs: file URL or stream
Side effects: reads DB, may trigger background job

Function: on_guild_config_reload()
File: core/moderation/protection_manager.py
Params: guild_id
Description: Handler that reloads and re-applies protection config to in-memory caches and active schedulers after config change.
Inputs: guild_id
Outputs: None
Side effects: updates cache, triggers SSE, may re-evaluate pending messages

CURRENCY SYSTEM - COG FUNCTIONS

Function: setup()
File: cogs/currency.py
Params: bot
Description: Discord cog setup function that adds the currency cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: balance()
File: cogs/currency.py
Params: interaction
Description: Slash command to check user's current balance, auto-creates user if missing
Inputs: Discord interaction
Outputs: Discord embed with balance info
Side effects: may create user record, sends SSE event

Function: daily()
File: cogs/currency.py
Params: interaction
Description: Slash command for daily currency reward with cooldown enforcement
Inputs: Discord interaction
Outputs: Discord embed with reward info
Side effects: updates balance, logs transaction, sends SSE event

Function: give_money()
File: cogs/currency.py
Params: interaction, user, amount
Description: Slash command to transfer currency between users with atomic operations
Inputs: Discord interaction, target user, amount
Outputs: Discord embed with transfer confirmation
Side effects: updates both users' balances, logs transactions, sends SSE events

Function: leaderboard()
File: cogs/currency.py
Params: interaction
Description: Slash command to show top currency holders with pagination
Inputs: Discord interaction
Outputs: Discord embed with leaderboard
Side effects: reads from backend with caching

Function: buy()
File: cogs/currency.py
Params: interaction, item_id
Description: Slash command to purchase shop items with stock validation
Inputs: Discord interaction, item ID
Outputs: Discord embed with purchase confirmation
Side effects: updates balance, inventory, stock, logs transaction, sends SSE events

Function: shop()
File: cogs/currency.py
Params: interaction
Description: Slash command to browse shop items with pagination
Inputs: Discord interaction
Outputs: Discord embed with shop items
Side effects: reads from backend

Function: inventory()
File: cogs/currency.py
Params: interaction, user
Description: Slash command to view user inventory
Inputs: Discord interaction, optional target user
Outputs: Discord embed with inventory items
Side effects: reads from backend

ADMIN SYSTEM - COG FUNCTIONS

Function: setup()
File: cogs/admin.py
Params: bot
Description: Discord cog setup function that adds the admin cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: setprefix()
File: cogs/admin.py
Params: interaction, prefix
Description: Admin slash command to change bot command prefix
Inputs: Discord interaction, new prefix
Outputs: Discord embed with confirmation
Side effects: updates guild config, sends SSE event

Function: reinitialize()
File: cogs/admin.py
Params: interaction
Description: Admin slash command to reinitialize guild data and Discord messages
Inputs: Discord interaction
Outputs: Discord embed with progress
Side effects: recreates tasks, embeds, announcements, shop items

Function: validate()
File: cogs/admin.py
Params: interaction
Description: Admin slash command to validate guild data integrity
Inputs: Discord interaction
Outputs: Discord embed with validation results
Side effects: checks for orphaned data, missing messages

Function: add_command()
File: cogs/admin.py
Params: interaction, name, response
Description: Admin slash command to add custom bot commands
Inputs: Discord interaction, command name, response text
Outputs: Discord embed with confirmation
Side effects: saves custom command, sends SSE event

Function: remove_command()
File: cogs/admin.py
Params: interaction, name
Description: Admin slash command to remove custom bot commands
Inputs: Discord interaction, command name
Outputs: Discord embed with confirmation
Side effects: deletes custom command, sends SSE event

Function: embed()
File: cogs/admin.py
Params: interaction, title, description, color
Description: Admin slash command to create rich embed messages
Inputs: Discord interaction, title, description, color
Outputs: Discord embed with confirmation
Side effects: posts embed to Discord, saves to database

Function: announce()
File: cogs/admin.py
Params: interaction, channel, message
Description: Admin slash command to send announcements
Inputs: Discord interaction, target channel, message
Outputs: Discord embed with confirmation
Side effects: posts message to Discord, saves announcement

Function: close_task()
File: cogs/admin.py
Params: interaction, name
Description: Admin slash command to manually close tasks
Inputs: Discord interaction, task name
Outputs: Discord embed with confirmation
Side effects: updates task status, awards rewards, sends SSE events

Function: additem()
File: cogs/admin.py
Params: interaction, id, name, price, description
Description: Admin slash command to add shop items
Inputs: Discord interaction, item ID, name, price, description
Outputs: Discord embed with confirmation
Side effects: creates shop item, posts Discord message, sends SSE event

Function: updateitem()
File: cogs/admin.py
Params: interaction, id, name, price, description
Description: Admin slash command to update shop items
Inputs: Discord interaction, item ID, name, price, description
Outputs: Discord embed with confirmation
Side effects: updates shop item, edits Discord message, sends SSE event

Function: restock()
File: cogs/admin.py
Params: interaction, id, quantity
Description: Admin slash command to restock shop items
Inputs: Discord interaction, item ID, quantity
Outputs: Discord embed with confirmation
Side effects: updates item stock, edits Discord message, sends SSE event

Function: shopstats()
File: cogs/admin.py
Params: interaction
Description: Admin slash command to view shop statistics
Inputs: Discord interaction
Outputs: Discord embed with shop stats
Side effects: reads transaction data

Function: completetask()
File: cogs/admin.py
Params: interaction, user, task_id
Description: Admin slash command to manually complete tasks
Inputs: Discord interaction, target user, task ID
Outputs: Discord embed with confirmation
Side effects: awards reward, updates task status, sends SSE events

GENERAL SYSTEM - COG FUNCTIONS

Function: setup()
File: cogs/general.py
Params: bot
Description: Discord cog setup function that adds the general cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: view_tasks()
File: cogs/general.py
Params: interaction
Description: Slash command to view available tasks
Inputs: Discord interaction
Outputs: Discord embed with task list
Side effects: reads from backend

Function: claim()
File: cogs/general.py
Params: interaction, task_id
Description: Slash command to claim tasks
Inputs: Discord interaction, task ID
Outputs: Discord embed with confirmation
Side effects: updates task claims, sends SSE event

Function: mytasks()
File: cogs/general.py
Params: interaction
Description: Slash command to view user's claimed tasks
Inputs: Discord interaction
Outputs: Discord embed with user's tasks
Side effects: reads from backend

Function: task_submit()
File: cogs/general.py
Params: interaction, proof
Description: Slash command to submit task completion proof
Inputs: Discord interaction, proof text/attachments
Outputs: Discord embed with confirmation
Side effects: updates task status, sends SSE event

Function: tasks()
File: cogs/general.py
Params: interaction
Description: Slash command to view all tasks with filtering
Inputs: Discord interaction
Outputs: Discord embed with task list
Side effects: reads from backend

Function: task_assign()
File: cogs/general.py
Params: interaction, user, task_id
Description: Admin slash command to assign tasks to users
Inputs: Discord interaction, target user, task ID
Outputs: Discord embed with confirmation
Side effects: updates task assignment, sends SSE event

Function: task_archive()
File: cogs/general.py
Params: interaction, task_id
Description: Admin slash command to archive completed tasks
Inputs: Discord interaction, task ID
Outputs: Discord embed with confirmation
Side effects: updates task status, removes Discord message

Function: transactions()
File: cogs/general.py
Params: interaction, user
Description: Slash command to view transaction history
Inputs: Discord interaction, optional target user
Outputs: Discord embed with transaction list
Side effects: reads from backend

TASKS COG FUNCTIONS

Function: setup()
File: cogs/tasks.py
Params: bot
Description: Discord cog setup function that adds the tasks cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: post_task_to_discord()
File: cogs/tasks.py
Params: guild_id, task_data
Description: Posts task embed to Discord channel and returns message ID
Inputs: guild ID, task data dict
Outputs: Discord message ID or None
Side effects: sends Discord message, updates task data

OTHER COGS

Function: setup()
File: cogs/announcements.py
Params: bot
Description: Discord cog setup function that adds the announcements cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: setup()
File: cogs/embeds.py
Params: bot
Description: Discord cog setup function that adds the embeds cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

Function: setup()
File: cogs/bot_admin.py
Params: bot
Description: Discord cog setup function that adds the bot admin cog to the bot
Inputs: bot instance
Outputs: None
Side effects: registers slash commands with Discord

CORE DATA MANAGER FUNCTIONS

Function: __init__()
File: core/data_manager.py
Params: None
Description: Constructor for DataManager class, initializes connections and caches
Inputs: None
Outputs: None
Side effects: establishes database connections, initializes caches

Function: set_bot_instance()
File: core/data_manager.py
Params: bot
Description: Sets the Discord bot instance for data operations
Inputs: Discord bot instance
Outputs: None
Side effects: stores bot reference for Discord operations

Function: load_guild_data()
File: core/data_manager.py
Params: guild_id, data_type
Description: Loads guild-specific data from Supabase with caching
Inputs: guild ID, data type (currency/tasks/config/etc)
Outputs: data dictionary or None
Side effects: may read from cache or database

Function: save_guild_data()
File: core/data_manager.py
Params: guild_id, data_type, data
Description: Saves guild-specific data to Supabase with atomic operations
Inputs: guild ID, data type, data dictionary
Outputs: success boolean
Side effects: writes to database, invalidates cache, broadcasts events

Function: atomic_transaction()
File: core/data_manager.py
Params: guild_id, updates
Description: Performs atomic multi-table updates with rollback capability
Inputs: guild ID, updates dictionary
Outputs: success boolean
Side effects: writes multiple tables atomically, broadcasts events

Function: get_connection_status()
File: core/data_manager.py
Params: None
Description: Returns current database connection health status
Inputs: None
Outputs: status dictionary
Side effects: checks database connectivity

Function: invalidate_cache()
File: core/data_manager.py
Params: guild_id, data_type
Description: Clears cached data for specific guild/data type
Inputs: guild ID, data type
Outputs: None
Side effects: removes cache entries

Function: get_cache_stats()
File: core/data_manager.py
Params: None
Description: Returns cache performance statistics
Inputs: None
Outputs: stats dictionary
Side effects: none

Function: cleanup_expired_cache()
File: core/data_manager.py
Params: None
Description: Removes expired cache entries
Inputs: None
Outputs: cleanup count
Side effects: removes expired cache entries

Function: sync_all_guilds()
File: core/data_manager.py
Params: None
Description: Synchronizes all guild data with database
Inputs: None
Outputs: sync results dictionary
Side effects: updates database records, marks inactive guilds

Function: get_all_guilds()
File: core/data_manager.py
Params: None
Description: Returns list of all guild IDs
Inputs: None
Outputs: guild ID list
Side effects: reads from database

Function: ensure_user_exists()
File: core/data_manager.py
Params: guild_id, user_id
Description: Creates user record if it doesn't exist
Inputs: guild ID, user ID
Outputs: user data dictionary
Side effects: may create database record

Function: load_currency_data()
File: core/data_manager.py
Params: guild_id
Description: Loads currency data for a guild
Inputs: guild ID
Outputs: currency data dictionary
Side effects: reads from database/cache

Function: load_guild_config()
File: core/data_manager.py
Params: guild_id
Description: Loads configuration data for a guild
Inputs: guild ID
Outputs: config data dictionary
Side effects: reads from database/cache

Function: register_listener()
File: core/data_manager.py
Params: callback
Description: Registers event listener for data changes
Inputs: callback function
Outputs: None
Side effects: adds listener to list

Function: broadcast_event()
File: core/data_manager.py
Params: event_type, data
Description: Broadcasts data change events to listeners
Inputs: event type, event data
Outputs: None
Side effects: calls registered listeners

Function: get_performance_stats()
File: core/data_manager.py
Params: None
Description: Returns performance statistics for data operations
Inputs: None
Outputs: stats dictionary
Side effects: none

CORE TASK MANAGER FUNCTIONS

Function: __init__()
File: core/task_manager.py
Params: data_manager, transaction_manager
Description: Constructor for TaskManager class
Inputs: data manager instance, transaction manager instance
Outputs: None
Side effects: stores references

Function: set_bot()
File: core/task_manager.py
Params: bot
Description: Sets Discord bot instance for task operations
Inputs: Discord bot instance
Outputs: None
Side effects: stores bot reference

Function: create_task()
File: core/task_manager.py
Params: guild_id, task_data
Description: Creates new task with validation and Discord message posting
Inputs: guild ID, task data dictionary
Outputs: result dictionary with success/task data
Side effects: saves to database, posts Discord message, sends SSE event

Function: claim_task()
File: core/task_manager.py
Params: guild_id, user_id, task_id
Description: Claims task for user with atomic validation
Inputs: guild ID, user ID, task ID
Outputs: result dictionary
Side effects: updates task claims, sends SSE event

Function: submit_task()
File: core/task_manager.py
Params: guild_id, user_id, task_id, proof_data
Description: Submits task completion proof
Inputs: guild ID, user ID, task ID, proof data
Outputs: result dictionary
Side effects: updates task status, sends SSE event

Function: approve_task()
File: core/task_manager.py
Params: guild_id, user_id, task_id, approver_id
Description: Approves submitted task and awards reward
Inputs: guild ID, user ID, task ID, approver ID
Outputs: result dictionary
Side effects: awards currency, updates task status, logs transaction, sends SSE events

Function: reject_task()
File: core/task_manager.py
Params: guild_id, user_id, task_id, reason
Description: Rejects submitted task with reason
Inputs: guild ID, user ID, task ID, rejection reason
Outputs: result dictionary
Side effects: resets task status, sends SSE event

Function: expire_overdue_tasks()
File: core/task_manager.py
Params: guild_id
Description: Expires tasks that have passed their deadline
Inputs: guild ID
Outputs: number of expired tasks
Side effects: updates task statuses, sends SSE events

Function: get_user_tasks()
File: core/task_manager.py
Params: guild_id, user_id, status_filter
Description: Gets tasks for specific user with optional status filtering
Inputs: guild ID, user ID, status filter
Outputs: list of user tasks
Side effects: reads from database

Function: get_available_tasks()
File: core/task_manager.py
Params: guild_id, user_id, channel_id
Description: Gets tasks available for claiming
Inputs: guild ID, optional user ID, optional channel ID
Outputs: list of available tasks
Side effects: reads from database

Function: _atomic_task_operation()
File: core/task_manager.py
Params: guild_id, operation_func
Description: Executes atomic task operations with rollback capability
Inputs: guild ID, operation function
Outputs: operation result
Side effects: atomic database operations

Function: get_task_statistics()
File: core/task_manager.py
Params: guild_id
Description: Returns task statistics for a guild
Inputs: guild ID
Outputs: statistics dictionary
Side effects: reads from database

CORE TRANSACTION MANAGER FUNCTIONS

Function: __init__()
File: core/transaction_manager.py
Params: data_manager
Description: Constructor for TransactionManager class
Inputs: data manager instance
Outputs: None
Side effects: initializes indexes and locks

Function: _load_transactions()
File: core/transaction_manager.py
Params: guild_id
Description: Loads transactions from database
Inputs: guild ID
Outputs: transactions list
Side effects: reads from database

Function: _save_transactions()
File: core/transaction_manager.py
Params: guild_id, transactions
Description: Saves transactions to database
Inputs: guild ID, transactions list
Outputs: None
Side effects: writes to database

Function: _get_lock()
File: core/transaction_manager.py
Params: guild_id
Description: Gets threading lock for guild operations
Inputs: guild ID
Outputs: threading lock
Side effects: creates lock if needed

Function: _build_indexes()
File: core/transaction_manager.py
Params: guild_id
Description: Builds search indexes for transactions
Inputs: guild ID
Outputs: None
Side effects: creates in-memory indexes

Function: log_transaction()
File: core/transaction_manager.py
Params: guild_id, user_id, amount, balance_before, balance_after, transaction_type, description, metadata, idempotency_key
Description: Logs transaction with validation and indexing
Inputs: transaction details
Outputs: transaction data
Side effects: writes to database, updates indexes, broadcasts SSE event

Function: _find_transaction_by_idempotency()
File: core/transaction_manager.py
Params: guild_id, idempotency_key
Description: Finds existing transaction by idempotency key
Inputs: guild ID, idempotency key
Outputs: transaction data or None
Side effects: reads from database

Function: _update_indexes()
File: core/transaction_manager.py
Params: guild_id, transaction
Description: Updates search indexes with new transaction
Inputs: guild ID, transaction data
Outputs: None
Side effects: updates in-memory indexes

Function: get_transactions()
File: core/transaction_manager.py
Params: guild_id, user_id, transaction_type, start_date, end_date, limit, offset, sort
Description: Retrieves transactions with filtering and pagination
Inputs: filter parameters
Outputs: transactions result dictionary
Side effects: reads from database/indexes

Function: get_user_statistics()
File: core/transaction_manager.py
Params: guild_id, user_id, period
Description: Calculates user transaction statistics
Inputs: guild ID, user ID, time period
Outputs: statistics dictionary
Side effects: reads from database

Function: get_server_statistics()
File: core/transaction_manager.py
Params: guild_id, period
Description: Calculates server-wide transaction statistics
Inputs: guild ID, time period
Outputs: statistics dictionary
Side effects: reads from database

Function: rebuild_indexes()
File: core/transaction_manager.py
Params: guild_id
Description: Rebuilds search indexes from scratch
Inputs: guild ID
Outputs: None
Side effects: recreates in-memory indexes

Function: validate_transaction_integrity()
File: core/transaction_manager.py
Params: guild_id, user_id
Description: Validates transaction history against current balance
Inputs: guild ID, user ID
Outputs: validation result dictionary
Side effects: reads from database

Function: deduct_balance()
File: core/transaction_manager.py
Params: guild_id, user_id, amount, description, transaction_type
Description: Deducts balance and logs transaction atomically
Inputs: deduction details
Outputs: new balance
Side effects: updates balance, logs transaction

Function: cleanup_old_transactions()
File: core/transaction_manager.py
Params: guild_id, days_to_keep, archive
Description: Removes old transactions beyond retention period
Inputs: guild ID, retention days, archive flag
Outputs: number of transactions removed
Side effects: deletes from database, rebuilds indexes

CORE UTILS FUNCTIONS

Function: format_currency()
File: core/utils.py
Params: amount, symbol
Description: Formats currency amount with symbol and commas
Inputs: amount number, currency symbol
Outputs: formatted string
Side effects: none

Function: format_timestamp()
File: core/utils.py
Params: timestamp
Description: Formats ISO timestamp for Discord relative time
Inputs: ISO timestamp string
Outputs: Discord timestamp string
Side effects: none

Function: parse_duration()
File: core/utils.py
Params: duration_str
Description: Parses duration strings like "1h 30m" into timedelta
Inputs: duration string
Outputs: timedelta object or None
Side effects: none

Function: truncate_text()
File: core/utils.py
Params: text, max_length, suffix
Description: Truncates text to max length with suffix
Inputs: text, max length, suffix
Outputs: truncated string
Side effects: none

Function: create_embed()
File: core/utils.py
Params: title, description, color, **kwargs
Description: Creates standardized Discord embed
Inputs: embed parameters
Outputs: Discord embed object
Side effects: none

Function: add_embed_footer()
File: core/utils.py
Params: embed, ctx, text
Description: Adds standardized footer to embed with user info
Inputs: embed, Discord context, footer text
Outputs: None
Side effects: modifies embed object

Function: calculate_level_xp()
File: core/utils.py
Params: level
Description: Calculates XP required for level in RPG system
Inputs: level number
Outputs: XP required
Side effects: none

Function: get_level_from_xp()
File: core/utils.py
Params: xp
Description: Gets level from XP amount
Inputs: XP amount
Outputs: level number
Side effects: none

Function: format_number()
File: core/utils.py
Params: num
Description: Formats large numbers with K/M/B suffixes
Inputs: number
Outputs: formatted string
Side effects: none

Function: validate_discord_id()
File: core/utils.py
Params: discord_id
Description: Validates Discord ID format (17-19 digits)
Inputs: Discord ID string
Outputs: boolean
Side effects: none

Function: get_user_display_name()
File: core/utils.py
Params: user
Description: Gets best display name for Discord user
Inputs: user object
Outputs: display name string
Side effects: none

Function: safe_getattr()
File: core/utils.py
Params: obj, attr, default
Description: Safely gets attribute from object with default
Inputs: object, attribute name, default value
Outputs: attribute value or default
Side effects: none

Function: chunk_list()
File: core/utils.py
Params: lst, chunk_size
Description: Splits list into chunks of specified size
Inputs: list, chunk size
Outputs: list of chunks
Side effects: none

Function: find_closest_match()
File: core/utils.py
Params: target, options, threshold
Description: Finds closest string match using difflib
Inputs: target string, options list, similarity threshold
Outputs: closest match string or None
Side effects: none

Function: sanitize_filename()
File: core/utils.py
Params: filename
Description: Sanitizes filename for safe file operations
Inputs: filename string
Outputs: sanitized string
Side effects: none

Function: is_valid_url()
File: core/utils.py
Params: url
Description: Basic URL validation with regex
Inputs: URL string
Outputs: boolean
Side effects: none

Function: format_time_remaining()
File: core/utils.py
Params: target_time
Description: Formats time remaining until target time
Inputs: datetime object
Outputs: formatted string
Side effects: none

Function: validate_currency_amount()
File: core/utils.py
Params: amount, min_value, max_value
Description: Validates currency amount within acceptable range
Inputs: amount, min/max values
Outputs: validated amount or raises ValueError
Side effects: raises exception on invalid input

Function: validate_target_user()
File: core/utils.py
Params: interaction, target_user
Description: Validates target user for transactions
Inputs: Discord interaction, target user
Outputs: True or raises ValueError
Side effects: raises exception on invalid user

Function: validate_channel_permissions()
File: core/utils.py
Params: guild, channel_id, required_permissions
Description: Validates bot has required permissions in channel
Inputs: guild, channel ID, permission list
Outputs: True or raises ValueError
Side effects: raises exception on missing permissions

Function: ensure_user_exists()
File: core/utils.py
Params: guild_id, user_id
Description: Creates user entry if doesn't exist
Inputs: guild ID, user ID
Outputs: user data dictionary
Side effects: may create database record

Function: get_balance()
File: core/utils.py
Params: guild_id, user_id
Description: Safely gets user balance, returns 0 if not found
Inputs: guild ID, user ID
Outputs: balance number
Side effects: reads from database

Function: check_sufficient_balance()
File: core/utils.py
Params: guild_id, user_id, required_amount
Description: Checks if user can afford amount
Inputs: guild ID, user ID, required amount
Outputs: boolean
Side effects: reads from database

Function: validate_task_active()
File: core/utils.py
Params: task
Description: Checks if task status is active and not expired
Inputs: task data dictionary
Outputs: boolean
Side effects: none

Function: check_user_can_claim()
File: core/utils.py
Params: guild_id, user_id, task_id
Description: Verifies user eligibility to claim task
Inputs: guild ID, user ID, task ID
Outputs: True or raises ValueError
Side effects: raises exception if ineligible

Function: calculate_task_deadline()
File: core/utils.py
Params: claimed_at, duration_hours
Description: Calculates task deadline datetime
Inputs: claim time, duration hours
Outputs: deadline datetime
Side effects: none

Function: check_max_claims_reached()
File: core/utils.py
Params: task
Description: Checks if task has reached maximum claims
Inputs: task data dictionary
Outputs: boolean
Side effects: none

Function: validate_item_active()
File: core/utils.py
Params: item
Description: Checks if shop item is active
Inputs: item data dictionary
Outputs: boolean
Side effects: none

Function: check_stock_available()
File: core/utils.py
Params: item, quantity
Description: Verifies sufficient stock for purchase
Inputs: item data, requested quantity
Outputs: boolean
Side effects: none

Function: calculate_total_cost()
File: core/utils.py
Params: item, quantity
Description: Calculates total cost for item purchase
Inputs: item data, quantity
Outputs: total cost number
Side effects: none

Function: update_item_stock()
File: core/utils.py
Params: guild_id, item_id, quantity_change
Description: Updates item stock atomically
Inputs: guild ID, item ID, stock change
Outputs: updated item data
Side effects: updates database

Function: add_to_inventory()
File: core/utils.py
Params: guild_id, user_id, item_id, quantity
Description: Adds items to user inventory
Inputs: guild ID, user ID, item ID, quantity
Outputs: updated inventory
Side effects: updates database

Function: remove_from_inventory()
File: core/utils.py
Params: guild_id, user_id, item_id, quantity
Description: Removes items from user inventory
Inputs: guild ID, user ID, item ID, quantity
Outputs: success boolean
Side effects: updates database

Function: get_user_inventory()
File: core/utils.py
Params: guild_id, user_id
Description: Gets user's full inventory
Inputs: guild ID, user ID
Outputs: inventory dictionary
Side effects: reads from database

Function: check_inventory_has_item()
File: core/utils.py
Params: guild_id, user_id, item_id, quantity
Description: Checks if user owns sufficient items
Inputs: guild ID, user ID, item ID, quantity
Outputs: boolean
Side effects: reads from database

Function: build_announcement_embed()
File: core/utils.py
Params: announcement_data
Description: Converts announcement data to Discord embed
Inputs: announcement data dictionary
Outputs: Discord embed object
Side effects: none

Function: post_announcement()
File: core/utils.py
Params: guild, channel_id, embed_data
Description: Posts announcement embed to Discord channel
Inputs: guild, channel ID, embed data
Outputs: message ID string
Side effects: sends Discord message

Function: edit_announcement()
File: core/utils.py
Params: guild, channel_id, message_id, new_embed
Description: Updates existing announcement message
Inputs: guild, channel ID, message ID, new embed
Outputs: None
Side effects: edits Discord message

Function: delete_announcement()
File: core/utils.py
Params: guild, channel_id, message_id
Description: Removes announcement message
Inputs: guild, channel ID, message ID
Outputs: None
Side effects: deletes Discord message

Function: pin_message()
File: core/utils.py
Params: guild, channel_id, message_id
Description: Pins announcement in channel
Inputs: guild, channel ID, message ID
Outputs: None
Side effects: pins Discord message

Function: unpin_message()
File: core/utils.py
Params: guild, channel_id, message_id
Description: Unpins announcement from channel
Inputs: guild, channel ID, message ID
Outputs: None
Side effects: unpins Discord message

Function: create_embed_from_data()
File: core/utils.py
Params: embed_dict
Description: Converts embed data dictionary to Discord embed
Inputs: embed data dictionary
Outputs: Discord embed object
Side effects: none

Function: validate_embed_data()
File: core/utils.py
Params: embed_dict
Description: Validates embed data structure and limits
Inputs: embed data dictionary
Outputs: True or raises ValueError
Side effects: raises exception on invalid data

Function: post_embed_to_channel()
File: core/utils.py
Params: guild, channel_id, embed_data
Description: Posts embed to Discord channel
Inputs: guild, channel ID, embed data
Outputs: message ID string
Side effects: sends Discord message

Function: edit_embed_message()
File: core/utils.py
Params: guild, channel_id, message_id, new_embed_data
Description: Updates embed message content
Inputs: guild, channel ID, message ID, new embed data
Outputs: None
Side effects: edits Discord message

Function: atomic_write()
File: core/utils.py
Params: file_path, data
Description: Writes data to file with atomic rename
Inputs: file path, data dictionary
Outputs: None
Side effects: writes file atomically

Function: create_backup()
File: core/utils.py
Params: file_path
Description: Creates backup copy of file before modifications
Inputs: file path
Outputs: backup path or None
Side effects: creates backup file

Function: restore_from_backup()
File: core/utils.py
Params: file_path
Description: Restores file from backup on corruption
Inputs: file path
Outputs: success boolean
Side effects: restores from backup file

Function: validate_json_structure()
File: core/utils.py
Params: data, schema
Description: Validates data matches expected JSON schema
Inputs: data dictionary, schema
Outputs: True or raises ValueError
Side effects: raises exception on invalid structure

Function: is_server_owner()
File: core/utils.py
Params: guild, user_id
Description: Checks if user is guild owner
Inputs: guild, user ID
Outputs: boolean
Side effects: none

Function: is_admin()
File: core/utils.py
Params: guild, user_id, config
Description: Checks if user has admin role or is owner
Inputs: guild, user ID, config
Outputs: boolean
Side effects: none

Function: is_moderator()
File: core/utils.py
Params: guild, user_id, config
Description: Checks if user has moderator role
Inputs: guild, user ID, config
Outputs: boolean
Side effects: none

Function: has_manage_messages()
File: core/utils.py
Params: guild, user_id, channel_id
Description: Checks if user can manage messages in channel
Inputs: guild, user ID, channel ID
Outputs: boolean
Side effects: none

Function: has_manage_roles()
File: core/utils.py
Params: guild, user_id
Description: Checks if user can manage roles
Inputs: guild, user ID
Outputs: boolean
Side effects: none

CORE VALIDATOR FUNCTIONS

Function: __init__()
File: core/validator.py
Params: bot, data_manager
Description: Constructor for DataValidator class
Inputs: bot instance, data manager instance
Outputs: None
Side effects: stores references

Function: validate_guild()
File: core/validator.py
Params: guild_id
Description: Runs complete validation check on guild data
Inputs: guild ID
Outputs: validation report dictionary
Side effects: checks Discord messages, user data integrity

Function: _validate_tasks()
File: core/validator.py
Params: guild, report
Description: Validates task data matches Discord messages
Inputs: guild, validation report
Outputs: None
Side effects: updates validation report

Function: _validate_shop()
File: core/validator.py
Params: guild, report
Description: Validates shop data matches Discord
Inputs: guild, validation report
Outputs: None
Side effects: updates validation report

Function: _validate_users()
File: core/validator.py
Params: guild, report
Description: Validates user data integrity
Inputs: guild, validation report
Outputs: None
Side effects: updates validation report

BACKEND API FUNCTIONS

Function: setup_logging()
File: backend.py
Params: None
Description: Sets up logging configuration for production
Inputs: None
Outputs: logger instance
Side effects: configures logging system

Function: performance_monitor()
File: backend.py
Params: func
Description: Decorator to monitor function performance
Inputs: function to decorate
Outputs: decorated function
Side effects: logs performance metrics

Function: log_request_info()
File: backend.py
Params: None
Description: Logs incoming request information
Inputs: None
Outputs: None
Side effects: logs request details

Function: log_response_info()
File: backend.py
Params: response
Description: Logs response information
Inputs: response object
Outputs: response object
Side effects: logs response details

Function: get_bot()
File: backend.py
Params: None
Description: Gets the global bot instance
Inputs: None
Outputs: bot instance or None
Side effects: none

Function: run_bot()
File: backend.py
Params: None
Description: Runs Discord bot in separate thread
Inputs: None
Outputs: None
Side effects: starts bot thread

Function: set_bot_ready()
File: backend.py
Params: None
Description: Marks bot as ready for operations
Inputs: None
Outputs: None
Side effects: sets global ready flag

Function: start_bot_thread()
File: backend.py
Params: None
Description: Starts bot in separate thread before Flask starts
Inputs: None
Outputs: None
Side effects: creates and starts bot thread

Function: create_session()
File: backend.py
Params: user_data
Description: Creates new authenticated session
Inputs: user data dictionary
Outputs: session ID string
Side effects: stores session data

Function: get_session()
File: backend.py
Params: session_id
Description: Gets session data if valid
Inputs: session ID
Outputs: session data or None
Side effects: checks expiration

Function: destroy_session()
File: backend.py
Params: session_id
Description: Destroys authenticated session
Inputs: session ID
Outputs: None
Side effects: removes session data

Function: authenticate_user()
File: backend.py
Params: username, password
Description: Authenticates user with credentials
Inputs: username, password
Outputs: user data or None
Side effects: none

Function: session_required()
File: backend.py
Params: f
Description: Decorator requiring authenticated session
Inputs: function to decorate
Outputs: decorated function
Side effects: checks session validity

Function: bypass_auth_for_sse()
File: backend.py
Params: None
Description: Bypasses auth for SSE endpoint
Inputs: None
Outputs: None
Side effects: modifies request context

Function: init_data_files()
File: backend.py
Params: None
Description: Initializes data files if they don't exist
Inputs: None
Outputs: None
Side effects: creates JSON files

Function: read_json_file()
File: backend.py
Params: file_path
Description: Reads JSON file safely
Inputs: file path
Outputs: parsed JSON data
Side effects: reads file

Function: write_json_file()
File: backend.py
Params: file_path, data
Description: Writes data to JSON file
Inputs: file path, data dictionary
Outputs: None
Side effects: writes file

Function: log_event()
File: backend.py
Params: level, message
Description: Logs event to file with rotation
Inputs: log level, message
Outputs: None
Side effects: writes to log file

Function: _create_task_message()
File: backend.py
Params: guild, task_id, task_data, config
Description: Creates Discord message for task
Inputs: guild, task ID, task data, config
Outputs: message ID or None
Side effects: sends Discord message

Function: _create_shop_message()
File: backend.py
Params: guild, item_id, item_data, config
Description: Creates Discord message for shop item
Inputs: guild, item ID, item data, config
Outputs: message ID or None
Side effects: sends Discord message

Function: _update_shop_message()
File: backend.py
Params: guild, item_data, config
Description: Updates existing shop message
Inputs: guild, item data, config
Outputs: None
Side effects: edits Discord message

Function: create_task_message_and_update()
File: backend.py
Params: guild, server_id, task_id, task, post_announcement
Description: Creates task message with optional announcement
Inputs: guild, server ID, task ID, task data, announcement flag
Outputs: message IDs dictionary
Side effects: sends Discord messages

Function: create_task_embed()
File: backend.py
Params: task
Description: Creates Discord embed for task display
Inputs: task data dictionary
Outputs: Discord embed object
Side effects: none

Function: login()
File: backend.py
Params: None
Description: API endpoint for user login
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: creates session, sets cookies

Function: get_current_user_info()
File: backend.py
Params: None
Description: Gets current authenticated user info
Inputs: None
Outputs: JSON response
Side effects: reads session

Function: logout()
File: backend.py
Params: None
Description: API endpoint for user logout
Inputs: None
Outputs: JSON response
Side effects: destroys session, clears cookies

Function: validate_session()
File: backend.py
Params: None
Description: Validates current session
Inputs: None
Outputs: JSON response
Side effects: checks session validity

Function: health_check()
File: backend.py
Params: None
Description: Comprehensive health check endpoint
Inputs: None
Outputs: JSON response
Side effects: checks system status

Function: serve_frontend()
File: backend.py
Params: None
Description: Serves main HTML page
Inputs: None
Outputs: HTML file
Side effects: none

Function: serve_css()
File: backend.py
Params: None
Description: Serves CSS file
Inputs: None
Outputs: CSS file
Side effects: none

Function: serve_js()
File: backend.py
Params: None
Description: Serves JavaScript file
Inputs: None
Outputs: JavaScript file
Side effects: none

Function: favicon()
File: backend.py
Params: None
Description: Serves favicon or returns 204
Inputs: None
Outputs: favicon or empty response
Side effects: none

Function: get_servers()
File: backend.py
Params: None
Description: Gets list of all servers bot is in
Inputs: None
Outputs: JSON response
Side effects: reads from bot instance

Function: get_status()
File: backend.py
Params: None
Description: Gets bot status and uptime
Inputs: None
Outputs: JSON response
Side effects: reads status file

Function: get_logs()
File: backend.py
Params: None
Description: Gets system logs with filtering
Inputs: None
Outputs: JSON response
Side effects: reads log file

Function: clear_logs()
File: backend.py
Params: None
Description: Clears system logs
Inputs: None
Outputs: JSON response
Side effects: clears log file

Function: get_commands()
File: backend.py
Params: None
Description: Gets custom commands
Inputs: None
Outputs: JSON response
Side effects: reads commands file

Function: add_command()
File: backend.py
Params: None
Description: Adds custom command
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: saves command, logs event

Function: delete_command()
File: backend.py
Params: None
Description: Deletes custom command
Inputs: None
Outputs: JSON response
Side effects: removes command, logs event

Function: get_shop_items()
File: backend.py
Params: None
Description: Gets shop items with filtering
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: get_shop_item()
File: backend.py
Params: None
Description: Gets single shop item details
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: create_shop_item()
File: backend.py
Params: None
Description: Creates new shop item with Discord message
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: saves item, posts Discord message, broadcasts SSE

Function: update_shop_item()
File: backend.py
Params: None
Description: Updates existing shop item
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: updates item, syncs Discord message

Function: delete_shop_item()
File: backend.py
Params: None
Description: Deletes shop item and Discord message
Inputs: None
Outputs: JSON response
Side effects: removes item, deletes Discord message

Function: check_stock()
File: backend.py
Params: None
Description: Checks item stock availability
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: update_stock()
File: backend.py
Params: None
Description: Updates item stock
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: updates stock, syncs Discord message

Function: get_user_inventory()
File: backend.py
Params: None
Description: Gets user inventory with details
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: export_user_inventory()
File: backend.py
Params: None
Description: Exports user inventory as CSV/JSON
Inputs: None
Outputs: file response
Side effects: reads from database

Function: export_all_inventories()
File: backend.py
Params: None
Description: Exports all inventories (admin only)
Inputs: None
Outputs: file response
Side effects: reads from database

Function: get_shop_statistics()
File: backend.py
Params: None
Description: Gets shop performance statistics
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: validate_shop_integrity()
File: backend.py
Params: None
Description: Validates shop data integrity
Inputs: None
Outputs: JSON response
Side effects: checks database consistency

Function: get_user_details()
File: backend.py
Params: None
Description: Gets detailed user information
Inputs: None
Outputs: JSON response
Side effects: reads from database and Discord

Function: get_users()
File: backend.py
Params: None
Description: Gets users list with pagination
Inputs: None
Outputs: JSON response
Side effects: reads from database and Discord

Function: modify_user_balance()
File: backend.py
Params: None
Description: Modifies user balance with validation
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: updates balance, logs transaction, broadcasts SSE

Function: update_bot_status()
File: backend.py
Params: None
Description: Updates bot presence and status
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: updates Discord presence

Function: get_bot_status()
File: backend.py
Params: None
Description: Gets current bot status configuration
Inputs: None
Outputs: JSON response
Side effects: reads from config

Function: update_server_bot_status()
File: backend.py
Params: None
Description: Updates bot status for specific server
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: updates Discord presence

Function: get_settings()
File: backend.py
Params: None
Description: Gets global settings
Inputs: None
Outputs: JSON response
Side effects: reads settings file

Function: update_settings()
File: backend.py
Params: None
Description: Updates global settings
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: saves settings file

Function: restart_bot()
File: backend.py
Params: None
Description: Restarts the Discord bot process
Inputs: None
Outputs: JSON response
Side effects: kills and restarts bot process

Function: get_server_config()
File: backend.py
Params: None
Description: Gets configuration for specific server
Inputs: None
Outputs: JSON response
Side effects: reads from database

Function: update_server_config()
File: backend.py
Params: None
Description: Updates configuration for specific server
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: saves to database, invalidates cache

Function: get_server_tasks()
File: backend.py
Params: None
Description: Gets tasks for specific server
Inputs: None
Outputs: JSON response
Side effects:

STARTUP FUNCTIONS

Function: check_requirements()
File: start.py
Params: None
Description: Checks if all required Python packages are installed before starting the bot
Inputs: None
Outputs: None
Side effects: exits program if requirements not met

Function: check_env()
File: start.py
Params: None
Description: Validates that environment variables and .env file are properly configured
Inputs: None
Outputs: None
Side effects: exits program if configuration invalid

Function: create_directories()
File: start.py
Params: None
Description: Creates necessary data and log directories if they don't exist
Inputs: None
Outputs: None
Side effects: creates directories on filesystem

Function: run_flask_app()
File: start.py
Params: None
Description: Starts Flask web server in a separate thread for the web dashboard
Inputs: None
Outputs: None
Side effects: starts background Flask thread

Function: run_discord_bot()
File: start.py
Params: None
Description: Initializes and starts the Discord bot with all cogs and event handlers
Inputs: None
Outputs: None
Side effects: connects to Discord API

Function: main()
File: start.py
Params: None
Description: Main entry point that orchestrates startup sequence and concurrent execution
Inputs: None
Outputs: None
Side effects: runs both bot and Flask server concurrently

Function: run_flask_app()
File: railway_start.py
Params: None
Description: Railway-specific Flask startup with port configuration
Inputs: None
Outputs: None
Side effects: starts Flask server on Railway platform

Function: run_discord_bot()
File: railway_start.py
Params: None
Description: Railway-specific Discord bot startup
Inputs: None
Outputs: None
Side effects: connects to Discord API

Function: main()
File: railway_start.py
Params: None
Description: Railway deployment main entry point
Inputs: None
Outputs: None
Side effects: runs bot and Flask on Railway

MIGRATION FUNCTIONS

Function: migrate_transactions()
File: migrate_transactions.py
Params: None
Description: Adds missing 'type' field to existing transaction records
Inputs: None
Outputs: None
Side effects: updates transaction data files

Function: migrate_old_data()
File: migrate_to_multi_server.py
Params: None
Description: Migrates single-server data structure to multi-guild format
Inputs: None
Outputs: None
Side effects: restructures data files and directories

CORE PERMISSIONS FUNCTIONS

Function: is_admin()
File: core/permissions.py
Params: ctx
Description: Checks if Discord context user has admin permissions in guild
Inputs: Discord context
Outputs: boolean
Side effects: none

Function: is_admin_interaction()
File: core/permissions.py
Params: interaction
Description: Checks if Discord interaction user has admin permissions in guild
Inputs: Discord interaction
Outputs: boolean
Side effects: none

Function: is_moderator()
File: core/permissions.py
Params: ctx
Description: Checks if Discord context user has moderator permissions in guild
Inputs: Discord context
Outputs: boolean
Side effects: none

Function: is_moderator_interaction()
File: core/permissions.py
Params: interaction
Description: Checks if Discord interaction user has moderator permissions in guild
Inputs: Discord interaction
Outputs: boolean
Side effects: none

Function: has_feature_enabled()
File: core/permissions.py
Params: ctx, feature
Description: Checks if specified feature is enabled for the guild
Inputs: Discord context, feature name
Outputs: boolean
Side effects: none

Function: admin_only()
File: core/permissions.py
Params: None
Description: Decorator that restricts command to admin users only
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for non-admins

Function: moderator_only()
File: core/permissions.py
Params: None
Description: Decorator that restricts command to moderator users only
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for non-moderators

Function: feature_enabled()
File: core/permissions.py
Params: feature
Description: Decorator that checks if feature is enabled for guild
Inputs: feature name
Outputs: decorated function
Side effects: raises check failure if feature disabled

Function: guild_only()
File: core/permissions.py
Params: None
Description: Decorator that ensures command is used in a guild channel
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for DM usage

Function: bot_owner_only()
File: core/permissions.py
Params: None
Description: Decorator that restricts command to bot owner only
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for non-owners

Function: admin_only_interaction()
File: core/permissions.py
Params: None
Description: Decorator for slash commands restricted to admin users
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for non-admins

Function: moderator_only_interaction()
File: core/permissions.py
Params: None
Description: Decorator for slash commands restricted to moderator users
Inputs: function to decorate
Outputs: decorated function
Side effects: raises check failure for non-moderators

CORE INITIALIZER FUNCTIONS

Function: __init__()
File: core/initializer.py
Params: data_manager, bot
Description: Constructor for GuildInitializer class
Inputs: data manager instance, Discord bot instance
Outputs: None
Side effects: stores references

Function: initialize_guild()
File: core/initializer.py
Params: guild
Description: Performs complete guild initialization including config, tasks, shop, embeds, and users
Inputs: Discord guild object
Outputs: None
Side effects: creates database records, Discord messages, user accounts

Function: _ensure_config()
File: core/initializer.py
Params: guild
Description: Ensures guild configuration exists with proper defaults
Inputs: Discord guild object
Outputs: None
Side effects: creates/updates guild config in database

Function: _initialize_tasks()
File: core/initializer.py
Params: guild
Description: Sets up task system for new guild
Inputs: Discord guild object
Outputs: None
Side effects: creates task channel and initial task data

Function: _initialize_shop()
File: core/initializer.py
Params: guild
Description: Sets up shop system for new guild
Inputs: Discord guild object
Outputs: None
Side effects: creates shop channel and initial shop data

Function: _initialize_embeds()
File: core/initializer.py
Params: guild
Description: Sets up embed system for new guild
Inputs: Discord guild object
Outputs: None
Side effects: creates embed storage structure

Function: _initialize_users()
File: core/initializer.py
Params: guild
Description: Creates user records for all current guild members
Inputs: Discord guild object
Outputs: None
Side effects: creates user accounts in database

Function: _validate_user_data()
File: core/initializer.py
Params: guild
Description: Validates existing user data matches current guild membership
Inputs: Discord guild object
Outputs: None
Side effects: updates user active status

Function: _cleanup_orphaned_data()
File: core/initializer.py
Params: guild
Description: Removes Discord messages for deleted data
Inputs: Discord guild object
Outputs: None
Side effects: deletes Discord messages

Function: _create_task_embed()
File: core/initializer.py
Params: task_data
Description: Creates embed for task display during initialization
Inputs: task data dictionary
Outputs: Discord embed object
Side effects: none

Function: _create_shop_item_embed()
File: core/initializer.py
Params: item_data, config
Description: Creates embed for shop item display during initialization
Inputs: item data dictionary, config dictionary
Outputs: Discord embed object
Side effects: none

CORE EVENTS FUNCTIONS

Function: __init__()
File: core/events.py
Params: bot
Description: Constructor for EventHandler class
Inputs: Discord bot instance
Outputs: None
Side effects: stores bot reference

Function: setup_events()
File: core/events.py
Params: None
Description: Registers all Discord event handlers with the bot
Inputs: None
Outputs: None
Side effects: registers event listeners

Function: on_ready()
File: core/events.py
Params: None
Description: Handles bot ready event, performs initialization tasks
Inputs: None
Outputs: None
Side effects: starts background tasks, syncs commands

Function: on_guild_join()
File: core/events.py
Params: guild
Description: Handles bot joining a new guild
Inputs: Discord guild object
Outputs: None
Side effects: initializes guild data, sends welcome message

Function: on_guild_remove()
File: core/events.py
Params: guild
Description: Handles bot leaving a guild
Inputs: Discord guild object
Outputs: None
Side effects: marks guild as inactive, cleans up data

Function: on_command_error()
File: core/events.py
Params: ctx, error
Description: Global error handler for command errors
Inputs: Discord context, error object
Outputs: None
Side effects: sends error message to user

Function: on_message()
File: core/events.py
Params: message
Description: Global message handler for moderation and custom commands
Inputs: Discord message object
Outputs: None
Side effects: may delete messages, send responses

CORE EMBED BUILDER FUNCTIONS

Function: parse_color()
File: core/embed_builder.py
Params: color_input
Description: Parses color input string or int into Discord color
Inputs: color string or int
Outputs: Discord Color object
Side effects: none

Function: validate_embed_data()
File: core/embed_builder.py
Params: data
Description: Validates embed data against Discord limits
Inputs: embed data dictionary
Outputs: tuple of (boolean, error message)
Side effects: none

Function: build_embed()
File: core/embed_builder.py
Params: data
Description: Builds Discord embed from data dictionary
Inputs: embed data dictionary
Outputs: Discord Embed object
Side effects: none

Function: embed_to_dict()
File: core/embed_builder.py
Params: embed
Description: Converts Discord embed to storable dictionary
Inputs: Discord Embed object
Outputs: embed data dictionary
Side effects: none

Function: apply_template()
File: core/embed_builder.py
Params: data, template
Description: Applies template defaults to embed data
Inputs: embed data dictionary, template dictionary
Outputs: merged embed data dictionary
Side effects: none

Function: create_task_embed()
File: core/embed_builder.py
Params: task_data
Description: Creates standardized task embed
Inputs: task data dictionary
Outputs: Discord Embed object
Side effects: none

Function: create_shop_embed()
File: core/embed_builder.py
Params: item_data, config
Description: Creates standardized shop item embed
Inputs: item data dictionary, config dictionary
Outputs: Discord Embed object
Side effects: none

Function: create_announcement_embed()
File: core/embed_builder.py
Params: announcement_data
Description: Creates standardized announcement embed
Inputs: announcement data dictionary
Outputs: Discord Embed object
Side effects: none

Function: create_error_embed()
File: core/embed_builder.py
Params: title, description, color
Description: Creates standardized error embed
Inputs: title string, description string, color string
Outputs: Discord Embed object
Side effects: none

Function: create_success_embed()
File: core/embed_builder.py
Params: title, description, color
Description: Creates standardized success embed
Inputs: title string, description string, color string
Outputs: Discord Embed object
Side effects: none

CORE CACHE MANAGER FUNCTIONS

Function: __new__()
File: core/cache_manager.py
Params: cls
Description: Singleton pattern implementation for CacheManager
Inputs: class
Outputs: CacheManager instance
Side effects: ensures single instance

Function: __init__()
File: core/cache_manager.py
Params: None
Description: Constructor for CacheManager singleton
Inputs: None
Outputs: None
Side effects: initializes cache structures and background thread

Function: _start_cleanup_thread()
File: core/cache_manager.py
Params: None
Description: Starts background thread for cache cleanup
Inputs: None
Outputs: None
Side effects: creates and starts daemon thread

Function: get()
File: core/cache_manager.py
Params: key, default
Description: Retrieves cached value if not expired
Inputs: cache key, default value
Outputs: cached value or default
Side effects: none

Function: set()
File: core/cache_manager.py
Params: key, value, ttl_seconds
Description: Stores value in cache with TTL
Inputs: cache key, value, TTL seconds
Outputs: None
Side effects: stores in cache with expiration

Function: invalidate_cache()
File: core/cache_manager.py
Params: guild_id, data_type, user_id
Description: Invalidates specific cache entries
Inputs: guild ID, data type, optional user ID
Outputs: None
Side effects: removes cache entries

Function: _invalidate_local_cache()
File: core/cache_manager.py
Params: guild_id, data_type, user_id
Description: Removes local cache entries
Inputs: guild ID, data type, optional user ID
Outputs: None
Side effects: removes cache entries

Function: _broadcast_invalidation()
File: core/cache_manager.py
Params: invalidation_event
Description: Broadcasts cache invalidation to listeners
Inputs: invalidation event dictionary
Outputs: None
Side effects: notifies registered listeners

Function: _run_listener()
File: core/cache_manager.py
Params: listener, event
Description: Executes cache invalidation listener
Inputs: listener function, event dictionary
Outputs: None
Side effects: calls listener function

Function: register_listener()
File: core/cache_manager.py
Params: event_type, callback
Description: Registers callback for cache events
Inputs: event type, callback function
Outputs: None
Side effects: adds to listeners set

Function: unregister_listener()
File: core/cache_manager.py
Params: event_type, callback
Description: Unregisters cache event listener
Inputs: event type, callback function
Outputs: None
Side effects: removes from listeners set

Function: get_cache_stats()
File: core/cache_manager.py
Params: None
Description: Returns cache performance statistics
Inputs: None
Outputs: statistics dictionary
Side effects: none

Function: clear_all_cache()
File: core/cache_manager.py
Params: None
Description: Clears all cached data
Inputs: None
Outputs: None
Side effects: removes all cache entries

CORE ANNOUNCEMENT MANAGER FUNCTIONS

Function: __init__()
File: core/announcement_manager.py
Params: data_manager, bot
Description: Constructor for AnnouncementManager class
Inputs: data manager instance, Discord bot instance
Outputs: None
Side effects: stores references

Function: _generate_announcement_id()
File: core/announcement_manager.py
Params: None
Description: Generates unique announcement ID
Inputs: None
Outputs: announcement ID string
Side effects: none

Function: create_announcement()
File: core/announcement_manager.py
Params: guild_id, title, content, embed_data, channel_id, created_by
Description: Creates and posts new announcement
Inputs: announcement details
Outputs: announcement data dictionary
Side effects: posts Discord message, saves to database

Function: create_task_announcement()
File: core/announcement_manager.py
Params: guild_id, task_id, channel_id, created_by
Description: Creates announcement for task completion
Inputs: task details
Outputs: announcement data dictionary
Side effects: posts Discord message, saves to database

Function: edit_announcement()
File: core/announcement_manager.py
Params: guild_id, announcement_id, updates
Description: Updates existing announcement
Inputs: guild ID, announcement ID, update data
Outputs: updated announcement data
Side effects: edits Discord message, updates database

Function: delete_announcement()
File: core/announcement_manager.py
Params: guild_id, announcement_id
Description: Deletes announcement and Discord message
Inputs: guild ID, announcement ID
Outputs: success boolean
Side effects: deletes Discord message, removes from database

Function: pin_announcement()
File: core/announcement_manager.py
Params: guild_id, announcement_id
Description: Pins announcement message in Discord
Inputs: guild ID, announcement ID
Outputs: success boolean
Side effects: pins Discord message, updates database

Function: unpin_announcement()
File: core/announcement_manager.py
Params: guild_id, announcement_id
Description: Unpins announcement message in Discord
Inputs: guild ID, announcement ID
Outputs: success boolean
Side effects: unpins Discord message, updates database

Function: _post_announcement()
File: core/announcement_manager.py
Params: guild, channel_id, embed_data
Description: Posts announcement embed to Discord channel
Inputs: guild, channel ID, embed data
Outputs: message ID string
Side effects: sends Discord message

Function: _edit_announcement()
File: core/announcement_manager.py
Params: guild, channel_id, message_id, new_embed
Description: Updates existing announcement message
Inputs: guild, channel ID, message ID, new embed
Outputs: success boolean
Side effects: edits Discord message

Function: _delete_announcement()
File: core/announcement_manager.py
Params: guild, channel_id, message_id
Description: Removes announcement message from Discord
Inputs: guild, channel ID, message ID
Outputs: success boolean
Side effects: deletes Discord message

Function: _pin_message()
File: core/announcement_manager.py
Params: guild, channel_id, message_id
Description: Pins message in Discord channel
Inputs: guild, channel ID, message ID
Outputs: success boolean
Side effects: pins Discord message

Function: _unpin_message()
File: core/announcement_manager.py
Params: guild, channel_id, message_id
Description: Unpins message from Discord channel
Inputs: guild, channel ID, message ID
Outputs: success boolean
Side effects: unpins Discord message

CORE CLIENT FUNCTIONS

Function: create_bot()
File: core/client.py
Params: None
Description: Creates and configures Discord bot with intents and prefix
Inputs: None
Outputs: Discord Bot instance
Side effects: none

Function: get_prefix()
File: core/client.py
Params: bot, message
Description: Gets server-specific command prefix dynamically
Inputs: bot instance, Discord message
Outputs: prefix string
Side effects: reads from database

Function: get_token()
File: core/client.py
Params: None
Description: Retrieves Discord bot token from environment
Inputs: None
Outputs: token string
Side effects: none

CORE SHOP MANAGER FUNCTIONS

Function: __init__()
File: core/shop_manager.py
Params: data_manager, transaction_manager
Description: Constructor for ShopManager class
Inputs: data manager instance, transaction manager instance
Outputs: None
Side effects: initializes locks and caches

Function: _get_item_emoji()
File: core/shop_manager.py
Params: item
Description: Gets emoji for shop item display
Inputs: item data dictionary
Outputs: emoji string
Side effects: none

Function: get_shop_items()
File: core/shop_manager.py
Params: guild_id, category, active_only, include_out_of_stock
Description: Retrieves shop items with filtering and caching
Inputs: guild ID, optional filters
Outputs: items dictionary
Side effects: may read from cache

Function: get_item()
File: core/shop_manager.py
Params: guild_id, item_id
Description: Gets single shop item details
Inputs: guild ID, item ID
Outputs: item data dictionary or None
Side effects: none

Function: add_item()
File: core/shop_manager.py
Params: guild_id, item_id, name, description, price, category, stock, emoji, role_requirement, metadata
Description: Creates new shop item with validation
Inputs: item details
Outputs: created item data
Side effects: saves to database, broadcasts event

Function: update_item()
File: core/shop_manager.py
Params: guild_id, item_id, updates
Description: Updates existing shop item
Inputs: guild ID, item ID, update data
Outputs: updated item data
Side effects: saves to database, broadcasts event

Function: delete_item()
File: core/shop_manager.py
Params: guild_id, item_id, archive
Description: Deletes shop item with optional archiving
Inputs: guild ID, item ID, archive flag
Outputs: success boolean
Side effects: removes from database, broadcasts event

Function: purchase_item()
File: core/shop_manager.py
Params: guild_id, user_id, item_id, quantity, interaction
Description: Processes item purchase with atomic operations
Inputs: purchase details
Outputs: purchase result dictionary
Side effects: updates balance, inventory, stock, logs transaction

Function: check_stock()
File: core/shop_manager.py
Params: guild_id, item_id
Description: Checks item stock availability
Inputs: guild ID, item ID
Outputs: stock status dictionary
Side effects: none

Function: update_stock()
File: core/shop_manager.py
Params: guild_id, item_id, quantity, operation
Description: Updates item stock with thread safety
Inputs: guild ID, item ID, quantity, operation type
Outputs: stock update result
Side effects: updates database, broadcasts event

Function: get_inventory()
File: core/shop_manager.py
Params: guild_id, user_id, include_item_details
Description: Gets user inventory with optional item details
Inputs: guild ID, user ID, details flag
Outputs: inventory dictionary
Side effects: may read from cache

Function: add_to_inventory()
File: core/shop_manager.py
Params: guild_id, user_id, item_id, quantity
Description: Adds items to user inventory
Inputs: inventory update details
Outputs: None
Side effects: updates database, broadcasts event

Function: remove_from_inventory()
File: core/shop_manager.py
Params: guild_id, user_id, item_id, quantity
Description: Removes items from user inventory
Inputs: inventory update details
Outputs: success boolean
Side effects: updates database, broadcasts event

Function: use_item()
File: core/shop_manager.py
Params: guild_id, user_id, item_id, quantity
Description: Uses consumable item from inventory
Inputs: usage details
Outputs: usage result dictionary
Side effects: removes from inventory, logs usage

Function: get_shop_statistics()
File: core/shop_manager.py
Params: guild_id, period
Description: Calculates comprehensive shop statistics
Inputs: guild ID, time period
Outputs: statistics dictionary
Side effects: may read from cache

Function: sync_discord_message()
File: core/shop_manager.py
Params: guild_id, item_id, bot_instance
Description: Creates or updates Discord embed for shop item
Inputs: guild ID, item ID, bot instance
Outputs: None
Side effects: sends/edits Discord message

Function: export_inventory()
File: core/shop_manager.py
Params: guild_id, user_id, format
Description: Exports inventory data as CSV or JSON
Inputs: guild ID, optional user ID, format
Outputs: formatted data string
Side effects: none

Function: validate_shop_integrity()
File: core/shop_manager.py
Params: guild_id
Description: Validates shop data integrity and reports issues
Inputs: guild ID
Outputs: validation result dictionary
Side effects: none

Function: _check_role_requirement()
File: core/shop_manager.py
Params: guild, user_id, role_name
Description: Checks if user has required role for purchase
Inputs: guild, user ID, role name
Outputs: boolean
Side effects: none

Function: _clear_shop_cache()
File: core/shop_manager.py
Params: guild_id
Description: Clears shop-related cache entries
Inputs: guild ID
Outputs: None
Side effects: removes cache entries

Function: _clear_inventory_cache()
File: core/shop_manager.py
Params: guild_id, user_id
Description: Clears inventory-related cache entries
Inputs: guild ID, optional user ID
Outputs: None
Side effects: removes cache entries

Function: _validate_item_active()
File: core/shop_manager.py
Params: item
Description: Checks if shop item is active
Inputs: item data dictionary
Outputs: boolean
Side effects: none

Function: _check_stock_available()
File: core/shop_manager.py
Params: item, quantity
Description: Verifies sufficient stock for purchase
Inputs: item data, quantity
Outputs: boolean
Side effects: none

Function: _calculate_total_cost()
File: core/shop_manager.py
Params: item, quantity
Description: Calculates total cost for item purchase
Inputs: item data, quantity
Outputs: total cost number
Side effects: none

Function: _update_item_stock()
File: core/shop_manager.py
Params: guild_id, item_id, quantity_change
Description: Updates item stock atomically
Inputs: guild ID, item ID, stock change
Outputs: new stock level
Side effects: updates database

Function: _broadcast_event()
File: core/shop_manager.py
Params: event_type, data
Description: Broadcasts shop event to listeners
Inputs: event type, event data
Outputs: None
Side effects: notifies listeners

ADDITIONAL COG FUNCTIONS

Function: help_command()
File: cogs/general.py
Params: ctx
Description: Shows help menu with available commands
Inputs: Discord context
Outputs: None
Side effects: sends help embed

Function: ping()
File: cogs/general.py
Params: ctx
Description: Checks bot latency and responds
Inputs: Discord context
Outputs: None
Side effects: sends ping response

Function: stats()
File: cogs/general.py
Params: ctx
Description: Shows bot statistics
Inputs: Discord context
Outputs: None
Side effects: sends stats embed

Function: serverinfo()
File: cogs/general.py
Params: ctx
Description: Shows information about the current server
Inputs: Discord context
Outputs: None
Side effects: sends server info embed

Function: botinfo()
File: cogs/general.py
Params: ctx
Description: Shows information about the bot
Inputs: Discord context
Outputs: None
Side effects: sends bot info embed

Function: create_embed()
File: cogs/embeds.py
Params: interaction, title, description, color, fields, footer, thumbnail, image
Description: Creates and posts custom embed message
Inputs: Discord interaction, embed parameters
Outputs: None
Side effects: posts Discord embed

Function: edit_embed()
File: cogs/embeds.py
Params: interaction, embed_id, title, description, color, fields, footer, thumbnail, image
Description: Edits existing custom embed
Inputs: Discord interaction, embed ID, updated parameters
Outputs: None
Side effects: edits Discord message

Function: delete_embed()
File: cogs/embeds.py
Params: interaction, embed_id
Description: Deletes custom embed and Discord message
Inputs: Discord interaction, embed ID
Outputs: None
Side effects: deletes Discord message

Function: list_embeds()
File: cogs/embeds.py
Params: interaction
Description: Lists all custom embeds in the server
Inputs: Discord interaction
Outputs: None
Side effects: sends embed list

Function: announce()
File: cogs/embeds.py
Params: interaction, channel, title, description, color, fields, footer, thumbnail, image
Description: Creates announcement embed in specified channel
Inputs: Discord interaction, channel, embed parameters
Outputs: None
Side effects: posts Discord embed

Function: announce()
File: cogs/announcements.py
Params: interaction, channel, title, content, embed_data, mention_role
Description: Creates and posts announcement
Inputs: Discord interaction, channel, announcement content
Outputs: None
Side effects: posts Discord message, saves announcement

Function: announce_task()
File: cogs/announcements.py
Params: interaction, task_id, channel
Description: Creates announcement for task completion
Inputs: Discord interaction, task ID, channel
Outputs: None
Side effects: posts Discord message, saves announcement

Function: pin_announcement()
File: cogs/announcements.py
Params: interaction, announcement_id
Description: Pins announcement message
Inputs: Discord interaction, announcement ID
Outputs: None
Side effects: pins Discord message

Function: unpin_announcement()
File: cogs/announcements.py
Params: interaction, announcement_id
Description: Unpins announcement message
Inputs: Discord interaction, announcement ID
Outputs: None
Side effects: unpins Discord message

Function: set_currency()
File: cogs/admin.py
Params: ctx, symbol, name
Description: Customizes currency symbol and name for server
Inputs: Discord context, optional symbol, optional name
Outputs: None
Side effects: updates guild config

Function: server_config()
File: cogs/admin.py
Params: ctx
Description: Shows current server configuration
Inputs: Discord context
Outputs: None
Side effects: sends config embed

Function: toggle_feature()
File: cogs/admin.py
Params: ctx, feature
Description: Enables/disables features for the server
Inputs: Discord context, feature name
Outputs: None
Side effects: updates guild config

Function: add_admin_role()
File: cogs/admin.py
Params: ctx, role
Description: Adds role to admin roles list
Inputs: Discord context, Discord role
Outputs: None
Side effects: updates guild config

Function: add_mod_role()
File: cogs/admin.py
Params: ctx, role
Description: Adds role to moderator roles list
Inputs: Discord context, Discord role
Outputs: None
Side effects: updates guild config

Function: remove_admin_role()
File: cogs/admin.py
Params: ctx, role
Description: Removes role from admin roles list
Inputs: Discord context, Discord role
Outputs: None
Side effects: updates guild config

Function: remove_mod_role()
File: cogs/admin.py
Params: ctx, role
Description: Removes role from moderator roles list
Inputs: Discord context, Discord role
Outputs: None
Side effects: updates guild config

Function: create_backup()
File: cogs/admin.py
Params: ctx
Description: Creates backup of server data
Inputs: Discord context
Outputs: None
Side effects: creates backup files

Function: add_balance()
File: cogs/admin.py
Params: ctx, user, amount, reason
Description: Adds currency to user balance
Inputs: Discord context, target user, amount, reason
Outputs: None
Side effects: updates balance, logs transaction

Function: remove_balance()
File: cogs/admin.py
Params: ctx, user, amount, reason
Description: Removes currency from user balance
Inputs: Discord context, target user, amount, reason
Outputs: None
Side effects: updates balance, logs transaction

Function: set_balance()
File: cogs/admin.py
Params: ctx, user, amount, reason
Description: Sets user balance to specific amount
Inputs: Discord context, target user, amount, reason
Outputs: None
Side effects: updates balance, logs transaction

Function: reset_economy()
File: cogs/admin.py
Params: ctx
Description: Resets entire server economy with confirmation
Inputs: Discord context
Outputs: None
Side effects: resets all balances and transactions

Function: economy_stats()
File: cogs/admin.py
Params: ctx
Description: Shows server economy statistics
Inputs: Discord context
Outputs: None
Side effects: sends stats embed

Function: delete_item()
File: cogs/admin.py
Params: ctx, id
Description: Deletes shop item and Discord message
Inputs: Discord context, item ID
Outputs: None
Side effects: removes item, deletes Discord message

Function: cleanup_inactive_users()
File: cogs/admin.py
Params: ctx, days
Description: Cleans up inactive users older than specified days
Inputs: Discord context, days threshold
Outputs: None
Side effects: removes inactive user data

Function: _update_task_message()
File: cogs/admin.py
Params: guild_id, task_id, task_data
Description: Updates Discord message for completed task
Inputs: guild ID, task ID, task data
Outputs: None
Side effects: edits Discord message

Function: post_embed()
File: cogs/admin.py
Params: guild_id, embed_id, channel_id
Description: Posts embed message to Discord channel
Inputs: guild ID, embed ID, channel ID
Outputs: message ID string
Side effects: sends Discord message

Function: post_announcement()
File: cogs/admin.py
Params: guild_id, channel_id, content, embed_data, mention_role
Description: Posts announcement message to Discord
Inputs: announcement details
Outputs: message ID string
Side effects: sends Discord message

Function: buy_autocomplete()
File: cogs/currency.py
Params: interaction, current
Description: Provides autocomplete suggestions for shop items
Inputs: Discord interaction, current input
Outputs: list of autocomplete choices
Side effects: none

Function: confirm()
File: cogs/currency.py
Params: interaction, button
Description: Confirms item purchase in confirmation dialog
Inputs: Discord interaction, button
Outputs: None
Side effects: processes purchase

Function: cancel()
File: cogs/currency.py
Params: interaction, button
Description: Cancels item purchase in confirmation dialog
Inputs: Discord interaction, button
Outputs: None
Side effects: closes dialog

Function: post_shop_message()
File: cogs/currency.py
Params: guild_id, item
Description: Posts shop item message to Discord
Inputs: guild ID, item data
Outputs: message info dictionary
Side effects: sends Discord message

Function: update_shop_message()
File: cogs/currency.py
Params: guild_id, item_id, item
Description: Updates existing shop item message
Inputs: guild ID, item ID, item data
Outputs: None
Side effects: edits Discord message

Function: user_balance()
File: cogs/bot_admin.py
Params: interaction, server_id, user_id
Description: Shows user balance for specific server
Inputs: Discord interaction, server ID, user ID
Outputs: None
Side effects: sends balance info

Function: create_task()
File: cogs/bot_admin.py
Params: interaction, server_id, name, description, reward, duration_hours
Description: Creates task for specific server
Inputs: Discord interaction, server ID, task details
Outputs: None
Side effects: creates task, posts Discord message

Function: list_tasks()
File: cogs/bot_admin.py
Params: interaction, server_id
Description: Lists tasks for specific server
Inputs: Discord interaction, server ID
Outputs: None
Side effects: sends task list

Function: create_item()
File: cogs/bot_admin.py
Params: interaction, server_id, item_id, name, description, price
Description: Creates shop item for specific server
Inputs: Discord interaction, server ID, item details
Outputs: None
Side effects: creates item, posts Discord message

Function: list_items()
File: cogs/bot_admin.py
Params: interaction, server_id
Description: Lists shop items for specific server
Inputs: Discord interaction, server ID
Outputs: None
Side effects: sends item list

Function: create_announcement()
File: cogs/bot_admin.py
Params: interaction, server_id, title, content, channel_id
Description: Creates announcement for specific server
Inputs: Discord interaction, server ID, announcement details
Outputs: None
Side effects: posts Discord message, saves announcement

Function: server_stats()
File: cogs/bot_admin.py
Params: interaction
Description: Shows comprehensive server statistics
Inputs: Discord interaction
Outputs: None
Side effects: sends stats embed

Function: set_config()
File: cogs/bot_admin.py
Params: interaction, server_id, key, value
Description: Updates server configuration
Inputs: Discord interaction, server ID, config key, value
Outputs: None
Side effects: updates guild config

Function: get_config()
File: cogs/bot_admin.py
Params: interaction, server_id
Description: Shows server configuration
Inputs: Discord interaction, server ID
Outputs: None
Side effects: sends config info

ADDITIONAL TASKS COG FUNCTIONS

Function: discord_operation_with_retry()
File: cogs/tasks.py
Params: operation, max_retries, base_delay
Description: Retries Discord operations with exponential backoff
Inputs: operation function, retry parameters
Outputs: operation result
Side effects: retries failed operations

Function: claim_button()
File: cogs/tasks.py
Params: interaction, button
Description: Handles task claim button interaction
Inputs: Discord interaction, button
Outputs: None
Side effects: processes task claim

Function: handle_claim()
File: cogs/tasks.py
Params: interaction
Description: Processes task claim with validation
Inputs: Discord interaction
Outputs: None
Side effects: updates task status, sends SSE event

Function: atomic_task_claim()
File: cogs/tasks.py
Params: guild_id, user_id, task_id
Description: Atomically claims task with race condition prevention
Inputs: guild ID, user ID, task ID
Outputs: claim result dictionary
Side effects: updates database atomically

Function: expire_task()
File: cogs/tasks.py
Params: guild_id, task_id, guild
Description: Marks task as expired and updates message
Inputs: guild ID, task ID, guild object
Outputs: None
Side effects: updates task status, edits Discord message

Function: update_task_message()
File: cogs/tasks.py
Params: guild, guild_id, task_id, task
Description: Updates Discord task message with current data
Inputs: guild object, guild ID, task ID, task data
Outputs: None
Side effects: edits Discord message

Function: submit_task()
File: cogs/tasks.py
Params: interaction, proof
Description: Handles task submission with proof
Inputs: Discord interaction, proof data
Outputs: None
Side effects: updates task status

Function: accept_button()
File: cogs/tasks.py
Params: interaction, button
Description: Handles task acceptance button
Inputs: Discord interaction, button
Outputs: None
Side effects: approves task

Function: reject_button()
File: cogs/tasks.py
Params: interaction, button
Description: Handles task rejection button
Inputs: Discord interaction, button
Outputs: None
Side effects: rejects task

Function: handle_review()
File: cogs/tasks.py
Params: interaction, accept
Description: Processes task review decision
Inputs: Discord interaction, acceptance boolean
Outputs: None
Side effects: updates task status, awards/denies reward

Function: check_expired_tasks()
File: cogs/tasks.py
Params: None
Description: Background task to expire overdue tasks
Inputs: None
Outputs: None
Side effects: updates expired tasks

Function: before_check_expired_tasks()
File: cogs/tasks.py
Params: None
Description: Prepares background task for expired task checking
Inputs: None
Outputs: None
Side effects: waits for bot ready

Function: list_tasks()
File: cogs/tasks.py
Params: interaction, status_filter, category_filter, assigned_filter
Description: Lists tasks with advanced filtering
Inputs: Discord interaction, filter parameters
Outputs: None
Side effects: sends task list

Function: assign_task()
File: cogs/tasks.py
Params: interaction, user, task_id
Description: Assigns task to specific user
Inputs: Discord interaction, target user, task ID
Outputs: None
Side effects: updates task assignment

Function: archive_tasks()
File: cogs/tasks.py
Params: interaction, task_id
Description: Archives completed task
Inputs: Discord interaction, task ID
Outputs: None
Side effects: updates task status, removes Discord message

Function: delete_task_message()
File: cogs/tasks.py
Params: guild_id, task_id
Description: Deletes task message from Discord
Inputs: guild ID, task ID
Outputs: None
Side effects: deletes Discord message

Function: previous_button()
File: cogs/tasks.py
Params: interaction, button
Description: Handles pagination previous button
Inputs: Discord interaction, button
Outputs: None
Side effects: shows previous page

Function: next_button()
File: cogs/tasks.py
Params: interaction, button
Description: Handles pagination next button
Inputs: Discord interaction, button
Outputs: None
Side effects: shows next page

ADDITIONAL BACKEND FUNCTIONS

Function: _create_task_message()
File: backend.py
Params: guild, task_id, task_data, config
Description: Creates Discord message for task posting
Inputs: guild, task ID, task data, config
Outputs: message ID or None
Side effects: sends Discord message

Function: _create_shop_message()
File: backend.py
Params: guild, item_id, item_data, config
Description: Creates Discord message for shop item posting
Inputs: guild, item ID, item data, config
Outputs: message ID or None
Side effects: sends Discord message

Function: _update_shop_message()
File: backend.py
Params: guild, item_data, config
Description: Updates existing shop item Discord message
Inputs: guild, item data, config
Outputs: None
Side effects: edits Discord message

Function: create_server_task()
File: backend.py
Params: server_id
Description: Creates task for specific server via API
Inputs: server ID (reads request JSON)
Outputs: JSON response
Side effects: creates task, posts Discord message

Function: update_task_message()
File: backend.py
Params: guild, server_id, task_id, task
Description: Updates Discord task message via API
Inputs: guild, server ID, task ID, task data
Outputs: None
Side effects: edits Discord message

Function: check_balance_modification_rate_limit()
File: backend.py
Params: server_id, user_id
Description: Enforces rate limiting for balance modifications
Inputs: server ID, user ID
Outputs: None
Side effects: raises exception if rate limited

Function: atomic_task_operation()
File: backend.py
Params: server_id, operation_func
Description: Executes atomic task operations via API
Inputs: server ID, operation function
Outputs: operation result
Side effects: atomic database operations

Function: update_server_task()
File: backend.py
Params: server_id, task_id
Description: Updates task for specific server via API
Inputs: server ID, task ID (reads request JSON)
Outputs: JSON response
Side effects: updates task, syncs Discord message

Function: delete_server_task()
File: backend.py
Params: server_id, task_id
Description: Deletes task for specific server via API
Inputs: server ID, task ID
Outputs: JSON response
Side effects: deletes task, removes Discord message

Function: create_announcement_api()
File: backend.py
Params: server_id
Description: Creates announcement via API
Inputs: server ID (reads request JSON)
Outputs: JSON response
Side effects: posts Discord message, saves announcement

Function: create_task_announcement_api()
File: backend.py
Params: server_id, task_id
Description: Creates task completion announcement via API
Inputs: server ID, task ID
Outputs: JSON response
Side effects: posts Discord message, saves announcement

Function: edit_announcement_api()
File: backend.py
Params: server_id, announcement_id
Description: Edits announcement via API
Inputs: server ID, announcement ID (reads request JSON)
Outputs: JSON response
Side effects: edits Discord message, updates database

Function: delete_announcement_api()
File: backend.py
Params: server_id, announcement_id
Description: Deletes announcement via API
Inputs: server ID, announcement ID
Outputs: JSON response
Side effects: deletes Discord message, removes from database

Function: pin_announcement_api()
File: backend.py
Params: server_id, announcement_id
Description: Pins announcement via API
Inputs: server ID, announcement ID
Outputs: JSON response
Side effects: pins Discord message

Function: unpin_announcement_api()
File: backend.py
Params: server_id, announcement_id
Description: Unpins announcement via API
Inputs: server ID, announcement ID
Outputs: JSON response
Side effects: unpins Discord message

Function: update_embed()
File: backend.py
Params: server_id, embed_id
Description: Updates embed via API
Inputs: server ID, embed ID (reads request JSON)
Outputs: JSON response
Side effects: edits Discord message, updates database

Function: delete_embed()
File: backend.py
Params: server_id, embed_id
Description: Deletes embed via API
Inputs: server ID, embed ID
Outputs: JSON response
Side effects: deletes Discord message, removes from database

Function: get_channels()
File: backend.py
Params: server_id
Description: Gets text channels for server
Inputs: server ID
Outputs: JSON response
Side effects: reads Discord guild data

Function: export_data()
File: backend.py
Params: None
Description: Exports all server data as JSON
Inputs: None
Outputs: JSON file response
Side effects: reads all database data

Function: stream()
File: backend.py
Params: None
Description: Server-Sent Events endpoint with selective subscriptions
Inputs: None
Outputs: SSE stream
Side effects: maintains persistent connections

Function: test_sse()
File: backend.py
Params: None
Description: Tests SSE functionality by broadcasting events
Inputs: None (reads request JSON)
Outputs: JSON response
Side effects: broadcasts test SSE events

Function: broadcast_update()
File: backend.py
Params: event_type, data
Description: Broadcasts updates to SSE clients
Inputs: event type, event data
Outputs: None
Side effects: sends events to connected clients

Function: init_sse()
File: backend.py
Params: None
Description: Initializes SSE broadcasting system
Inputs: None
Outputs: None
Side effects: connects to data manager listeners

Function: set_bot_instance()
File: backend.py
Params: bot_instance
Description: Sets bot instance for API operations
Inputs: bot instance
Outputs: None
Side effects: stores bot reference

Function: set_data_manager()
File: backend.py
Params: dm_instance
Description: Sets data manager instance
Inputs: data manager instance
Outputs: None
Side effects: stores data manager reference

Function: run_backend()
File: backend.py
Params: None
Description: Runs Flask backend server
Inputs: None
Outputs: None
Side effects: starts Flask application

Function: check_bot_running()
File: backend.py
Params: None
Description: Checks if Discord bot process is running
Inputs: None
Outputs: boolean
Side effects: none

Function: kill_bot_process()
File: backend.py
Params: None
Description: Terminates Discord bot process
Inputs: None
Outputs: None
Side effects: kills bot process

Function: calculate_uptime()
File: backend.py
Params: None
Description: Calculates bot uptime in seconds
Inputs: None
Outputs: uptime seconds
Side effects: none

Function: run_discord_task()
File: backend.py
Params: coro
Description: Runs Discord coroutine from sync context
Inputs: coroutine
Outputs: coroutine result
Side effects: executes Discord API calls

Function: await_coroutine()
File: backend.py
Params: coro
Description: Helper to run coroutine from sync context
Inputs: coroutine
Outputs: coroutine result
Side effects: executes async operations

Function: not_found()
File: backend.py
Params: error
Description: Handles 404 Not Found errors
Inputs
================================================================================

 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o r e / m o d e r a t i o n / _ _ i n i t _ _ . p y 
 P a r a m s :   N o n e 
 D e s c r i p t i o n :   P a c k a g e   i n i t i a l i z a t i o n   f i l e   f o r   m o d e r a t i o n   m o d u l e 
 I n p u t s :   N o n e 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i m p o r t s   m o d e r a t i o n   c l a s s e s 
 
 F u n c t i o n :   q u a r a n t i n e _ m e s s a g e ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   r e a s o n 
 D e s c r i p t i o n :   M o v e s   o r   c o p i e s   m e s s a g e   c o n t e n t   t o   a   m o d e r a t o r - o n l y   c h a n n e l   o r   s t o r a g e   f o r   r e v i e w   i n s t e a d   o f   i m m e d i a t e   d e l e t i o n . 
 I n p u t s :   m e s s a g e ,   r e a s o n 
 O u t p u t s :   q u a r a n t i n e _ r e c o r d 
 S i d e   e f f e c t s :   p o s t s   t o   m o d   c h a n n e l ,   w r i t e s   D B ,   t r i g g e r s   S S E 
 
 F u n c t i o n :   _ w a r n _ u s e r ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   r e a s o n 
 D e s c r i p t i o n :   I s s u e s   a   w a r n i n g   t o   u s e r   v i a   D M 
 I n p u t s :   m e s s a g e ,   r e a s o n 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   s e n d s   D M ,   m a y   f a i l   s i l e n t l y 
 
 F u n c t i o n :   _ a p p l y _ t e m p o r a r y _ m u t e ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   r e a s o n 
 D e s c r i p t i o n :   A p p l i e s   t e m p o r a r y   m u t e   v i a   t i m e o u t 
 I n p u t s :   m e s s a g e ,   r e a s o n 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   a p p l i e s   D i s c o r d   t i m e o u t ,   l o g s   a c t i o n 
 
 F u n c t i o n :   _ k i c k _ u s e r ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   r e a s o n 
 D e s c r i p t i o n :   K i c k s   u s e r   f r o m   g u i l d 
 I n p u t s :   m e s s a g e ,   r e a s o n 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   k i c k s   u s e r ,   l o g s   a c t i o n 
 
 F u n c t i o n :   _ b a n _ u s e r ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   r e a s o n 
 D e s c r i p t i o n :   B a n s   u s e r   f r o m   g u i l d 
 I n p u t s :   m e s s a g e ,   r e a s o n 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   b a n s   u s e r ,   l o g s   a c t i o n 
 
 F u n c t i o n :   _ c r e a t e _ m o d e r a t i o n _ a u d i t _ l o g ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   a c t i o n _ p l a n ,   r e s u l t 
 D e s c r i p t i o n :   R e c o r d s   m o d e r a t i o n   a c t i o n s   f o r   a u d i t 
 I n p u t s :   m e s s a g e ,   a c t i o n _ p l a n ,   r e s u l t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   l o g s   t o   c o n f i g u r e d   c h a n n e l ,   w r i t e s   a u d i t   l o g 
 
 F u n c t i o n :   _ s e n d _ n o t i f i c a t i o n ( ) 
 F i l e :   c o r e / m o d e r a t i o n / e n f o r c e r . p y 
 P a r a m s :   m e s s a g e ,   a c t i o n _ p l a n 
 D e s c r i p t i o n :   S e n d s   n o t i f i c a t i o n   t o   m o d e r a t o r s 
 I n p u t s :   m e s s a g e ,   a c t i o n _ p l a n 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   s e n d s   t e m p o r a r y   n o t i f i c a t i o n   m e s s a g e 
 
 F u n c t i o n :   w a r n _ u s e r ( ) 
 F i l e :   c o r e / m o d e r a t i o n / a c t i o n s . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   r e a s o n ,   m o d e r a t o r _ i d ,   a u t o _ g e n e r a t e d 
 D e s c r i p t i o n :   I s s u e s   a   w a r n i n g   t o   u s e r   v i a   D M   a n d   l o g s   a   s t r i k e 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   r e a s o n ,   m o d e r a t o r _ i d ,   a u t o _ g e n e r a t e d 
 O u t p u t s :   w a r n i n g _ r e c o r d 
 S i d e   e f f e c t s :   s e n d s   D M ,   w r i t e s   D B ,   t r i g g e r s   S S E 
 
 F u n c t i o n :   a d d _ s t r i k e ( ) 
 F i l e :   c o r e / m o d e r a t i o n / a c t i o n s . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   r e a s o n ,   m o d e r a t o r _ i d 
 D e s c r i p t i o n :   A d d s   a   s t r i k e   r e c o r d   a n d   e v a l u a t e s   e s c a l a t i o n   t h r e s h o l d s 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   r e a s o n ,   m o d e r a t o r _ i d 
 O u t p u t s :   s t r i k e _ r e c o r d ,   e s c a l a t i o n 
 S i d e   e f f e c t s :   w r i t e s   D B ,   m a y   c a l l   m o d e r a t i o n   a c t i o n s 
 
 F u n c t i o n :   r e m o v e _ s t r i k e ( ) 
 F i l e :   c o r e / m o d e r a t i o n / a c t i o n s . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   s t r i k e _ i d ,   m o d e r a t o r _ i d 
 D e s c r i p t i o n :   R e m o v e s   a   s t r i k e   ( m a n u a l )   a n d   l o g s   a c t i o n 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   s t r i k e _ i d ,   m o d e r a t o r _ i d 
 O u t p u t s :   s u c c e s s 
 S i d e   e f f e c t s :   w r i t e s   D B ,   t r i g g e r s   S S E 
 
 F u n c t i o n :   a p p l y _ t e m p o r a r y _ m u t e ( ) 
 F i l e :   c o r e / m o d e r a t i o n / a c t i o n s . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   d u r a t i o n _ s e c o n d s ,   r e a s o n ,   m o d e r a t o r _ i d 
 D e s c r i p t i o n :   A p p l i e s   m u t e   r o l e   o r   t i m e o u t   v i a   D i s c o r d   A P I   f o r   t h e   s p e c i f i e d   d u r a t i o n 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   d u r a t i o n _ s e c o n d s ,   r e a s o n ,   m o d e r a t o r _ i d 
 O u t p u t s :   m u t e _ r e c o r d 
 S i d e   e f f e c t s :   m o d i f i e s   r o l e s / t i m e o u t s ,   w r i t e s   D B ,   s c h e d u l e s   u n m u t e   j o b 
 
 F u n c t i o n :   s c h e d u l e _ u n m u t e _ j o b ( ) 
 F i l e :   c o r e / m o d e r a t i o n / a c t i o n s . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   u n m u t e _ t i m e s t a m p 
 D e s c r i p t i o n :   E n s u r e s   t e m p o r a r y   m u t e s   a r e   a u t o m a t i c a l l y   r e m o v e d   a t   t h e   s c h e d u l e d   t i m e 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   u n m u t e _ t i m e s t a m p 
 O u t p u t s :   j o b _ i d 
 S i d e   e f f e c t s :   s c h e d u l e s   j o b   i n   p e r s i s t e n t   j o b   s t o r e 
 
 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   b o t 
 D e s c r i p t i o n :   C o n s t r u c t o r   f o r   M o d e r a t i o n S c h e d u l e r   c l a s s 
 I n p u t s :   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i n i t i a l i z e s   j o b   t r a c k i n g 
 
 F u n c t i o n :   s c h e d u l e _ u n m u t e _ j o b ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   u n m u t e _ t i m e s t a m p 
 D e s c r i p t i o n :   S c h e d u l e s   a n   u n m u t e   j o b   f o r   a   u s e r 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   u n m u t e _ t i m e s t a m p 
 O u t p u t s :   j o b _ i d 
 S i d e   e f f e c t s :   s c h e d u l e s   a s y n c   t a s k 
 
 F u n c t i o n :   _ s c h e d u l e _ u n m u t e _ t a s k ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   j o b _ i d ,   d e l a y 
 D e s c r i p t i o n :   S c h e d u l e s   t h e   a c t u a l   u n m u t e   t a s k   w i t h   d e l a y 
 I n p u t s :   j o b _ i d ,   d e l a y 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   c r e a t e s   a s y n c i o   t a s k 
 
 F u n c t i o n :   _ e x e c u t e _ u n m u t e _ j o b ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   j o b _ i n f o 
 D e s c r i p t i o n :   E x e c u t e s   t h e   u n m u t e   j o b 
 I n p u t s :   j o b _ i n f o 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   r e m o v e s   t i m e o u t ,   l o g s   a c t i o n 
 
 F u n c t i o n :   c a n c e l _ j o b ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   j o b _ i d 
 D e s c r i p t i o n :   C a n c e l s   a   s c h e d u l e d   j o b 
 I n p u t s :   j o b _ i d 
 O u t p u t s :   s u c c e s s 
 S i d e   e f f e c t s :   r e m o v e s   f r o m   t r a c k i n g 
 
 F u n c t i o n :   g e t _ s c h e d u l e d _ j o b s ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   N o n e 
 D e s c r i p t i o n :   R e t u r n s   l i s t   o f   a l l   s c h e d u l e d   j o b s 
 I n p u t s :   N o n e 
 O u t p u t s :   j o b s   l i s t 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   g e t _ j o b _ i n f o ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   j o b _ i d 
 D e s c r i p t i o n :   R e t u r n s   i n f o r m a t i o n   a b o u t   a   s p e c i f i c   j o b 
 I n p u t s :   j o b _ i d 
 O u t p u t s :   j o b   i n f o 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   c l e a n u p _ e x p i r e d _ j o b s ( ) 
 F i l e :   c o r e / m o d e r a t i o n / s c h e d u l e r . p y 
 P a r a m s :   N o n e 
 D e s c r i p t i o n :   R e m o v e s   j o b s   t h a t   h a v e   a l r e a d y   e x e c u t e d 
 I n p u t s :   N o n e 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   r e m o v e s   e x p i r e d   j o b s 
 
 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   p r o t e c t i o n _ m a n a g e r ,   b o t 
 D e s c r i p t i o n :   C o n s t r u c t o r   f o r   M o d e r a t i o n L o g g e r   c l a s s 
 I n p u t s :   p r o t e c t i o n _ m a n a g e r ,   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i n i t i a l i z e s   a u d i t   l o g   s t o r a g e 
 
 F u n c t i o n :   c r e a t e _ m o d e r a t i o n _ a u d i t _ l o g ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   g u i l d _ i d ,   a c t i o n ,   u s e r _ i d ,   m o d e r a t o r _ i d ,   m e s s a g e _ i d ,   d e t a i l s 
 D e s c r i p t i o n :   R e c o r d s   m o d e r a t i o n   a c t i o n s   w i t h   u n i q u e   I D s   f o r   a u d i t s   a n d   u n d o   c a p a b i l i t y 
 I n p u t s :   g u i l d _ i d ,   a c t i o n ,   u s e r _ i d ,   m o d e r a t o r _ i d ,   m e s s a g e _ i d ,   d e t a i l s 
 O u t p u t s :   a u d i t _ e n t r y 
 S i d e   e f f e c t s :   s t o r e s   i n   m e m o r y ,   l o g s   t o   c h a n n e l 
 
 F u n c t i o n :   _ c a n _ u n d o _ a c t i o n ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   a c t i o n 
 D e s c r i p t i o n :   D e t e r m i n e s   i f   a n   a c t i o n   c a n   b e   u n d o n e 
 I n p u t s :   a c t i o n 
 O u t p u t s :   b o o l e a n 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   _ l o g _ t o _ c h a n n e l ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   g u i l d _ i d ,   a u d i t _ e n t r y 
 D e s c r i p t i o n :   L o g s   m o d e r a t i o n   a c t i o n   t o   c o n f i g u r e d   c h a n n e l 
 I n p u t s :   g u i l d _ i d ,   a u d i t _ e n t r y 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   s e n d s   D i s c o r d   e m b e d 
 
 F u n c t i o n :   _ g e t _ a c t i o n _ c o l o r ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   a c t i o n 
 D e s c r i p t i o n :   R e t u r n s   a p p r o p r i a t e   c o l o r   f o r   a c t i o n   t y p e 
 I n p u t s :   a c t i o n 
 O u t p u t s :   D i s c o r d   C o l o r 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   g e t _ a u d i t _ l o g s ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   g u i l d _ i d ,   u s e r _ i d ,   a c t i o n ,   l i m i t 
 D e s c r i p t i o n :   R e t r i e v e s   a u d i t   l o g s   w i t h   o p t i o n a l   f i l t e r i n g 
 I n p u t s :   g u i l d _ i d ,   u s e r _ i d ,   a c t i o n ,   l i m i t 
 O u t p u t s :   l o g s   l i s t 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   g e t _ a u d i t _ l o g _ b y _ i d ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   a u d i t _ i d 
 D e s c r i p t i o n :   R e t r i e v e s   a   s p e c i f i c   a u d i t   l o g   e n t r y 
 I n p u t s :   a u d i t _ i d 
 O u t p u t s :   l o g   e n t r y 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   e x p o r t _ m o d e r a t i o n _ l o g s ( ) 
 F i l e :   c o r e / m o d e r a t i o n / l o g g e r . p y 
 P a r a m s :   g u i l d _ i d ,   s t a r t _ d a t e ,   e n d _ d a t e ,   f o r m a t 
 D e s c r i p t i o n :   E x p o r t s   m o d e r a t i o n / a u d i t   l o g s   f o r   c o m p l i a n c e   o r   r e v i e w 
 I n p u t s :   g u i l d _ i d ,   s t a r t _ d a t e ,   e n d _ d a t e ,   f o r m a t 
 O u t p u t s :   f o r m a t t e d   d a t a 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o r e / m o d e r a t i o n / h e a l t h . p y 
 P a r a m s :   p r o t e c t i o n _ m a n a g e r ,   s c h e d u l e r ,   l o g g e r 
 D e s c r i p t i o n :   C o n s t r u c t o r   f o r   M o d e r a t i o n H e a l t h C h e c k e r   c l a s s 
 I n p u t s :   p r o t e c t i o n _ m a n a g e r ,   s c h e d u l e r ,   l o g g e r 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i n i t i a l i z e s   c h e c k   t r a c k i n g 
 
 F u n c t i o n :   m o d e r a t i o n _ h e a l t h _ c h e c k ( ) 
 F i l e :   c o r e / m o d e r a t i o n / h e a l t h . p y 
 P a r a m s :   N o n e 
 D e s c r i p t i o n :   V e r i f i e s   s c h e d u l e r ,   j o b   q u e u e ,   D B   c o n n e c t i v i t y ,   a n d   r u l e   c a c h e   i n t e g r i t y 
 I n p u t s :   N o n e 
 O u t p u t s :   h e a l t h   r e p o r t 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   b o t 
 D e s c r i p t i o n :   C o n s t r u c t o r   f o r   M o d e r a t i o n   c o g   c l a s s 
 I n p u t s :   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i n i t i a l i z e s   m o d e r a t i o n   c o m p o n e n t s 
 
 F u n c t i o n :   s e t _ m a n a g e r s ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   d a t a _ m a n a g e r 
 D e s c r i p t i o n :   S e t s   d a t a   m a n a g e r   r e f e r e n c e 
 I n p u t s :   d a t a _ m a n a g e r 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   s t o r e s   r e f e r e n c e 
 
 F u n c t i o n :   o n _ m e s s a g e ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   m e s s a g e 
 D e s c r i p t i o n :   P r i m a r y   m e s s a g e   l i s t e n e r   h o o k   t h a t   c o o r d i n a t e s   s c a n n i n g ,   e x e m p t i o n   c h e c k s ,   e v a l u a t i o n ,   a n d   a p p l y i n g   p r o t e c t i o n   a c t i o n s 
 I n p u t s :   m e s s a g e 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   m a y   d e l e t e / e d i t   m e s s a g e s ,   a p p l y   m o d e r a t i o n   a c t i o n s 
 
 F u n c t i o n :   c o m m a n d _ a d d _ p r o f a n i t y ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   w o r d 
 D e s c r i p t i o n :   S l a s h   c o m m a n d   f o r   a d m i n s   t o   a d d   p r o f a n i t y   e n t r i e s 
 I n p u t s :   i n t e r a c t i o n ,   w o r d 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   a d d _ p r o f a n i t y _ w o r d ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   c o m m a n d _ r e m o v e _ p r o f a n i t y ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   w o r d 
 D e s c r i p t i o n :   S l a s h   c o m m a n d   f o r   a d m i n s   t o   r e m o v e   p r o f a n i t y   e n t r i e s 
 I n p u t s :   i n t e r a c t i o n ,   w o r d 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   r e m o v e _ p r o f a n i t y _ w o r d ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   c o m m a n d _ l i s t _ p r o f a n i t y ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   p a g e 
 D e s c r i p t i o n :   A d m i n   c o m m a n d   t o   p a g i n a t e   a n d   v i e w   c u r r e n t   b l a c k l i s t   a n d   c u s t o m   r u l e s 
 I n p u t s :   i n t e r a c t i o n ,   p a g e 
 O u t p u t s :   p a g i n a t e d   e m b e d 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   c o m m a n d _ a d d _ w h i t e l i s t ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   d o m a i n _ o r _ r e g e x 
 D e s c r i p t i o n :   S l a s h   c o m m a n d   t o   a d d   a   w h i t e l i s t e d   d o m a i n / p a t t e r n 
 I n p u t s :   i n t e r a c t i o n ,   d o m a i n _ o r _ r e g e x 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   a d d _ w h i t e l i s t _ d o m a i n ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   c o m m a n d _ r e m o v e _ w h i t e l i s t ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   d o m a i n _ o r _ r e g e x 
 D e s c r i p t i o n :   S l a s h   c o m m a n d   t o   r e m o v e   w h i t e l i s t e d   d o m a i n / p a t t e r n 
 I n p u t s :   i n t e r a c t i o n ,   d o m a i n _ o r _ r e g e x 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   r e m o v e _ w h i t e l i s t _ d o m a i n ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   c o m m a n d _ s e t _ p r o t e c t i o n _ l e v e l ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   i n t e r a c t i o n ,   l e v e l 
 D e s c r i p t i o n :   A d m i n   c o m m a n d   t o   s e t   p r o t e c t i o n   s t r i c t n e s s   ( o f f ,   m o n i t o r ,   m o d e r a t e ,   s t r i c t ) 
 I n p u t s :   i n t e r a c t i o n ,   l e v e l 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   u p d a t e s   p r o t e c t i o n _ c o n f i g ,   t r i g g e r s   S S E 
 
 F u n c t i o n :   s e t u p ( ) 
 F i l e :   c o g s / m o d e r a t i o n . p y 
 P a r a m s :   b o t 
 D e s c r i p t i o n :   S e t u p   t h e   m o d e r a t i o n   c o g 
 I n p u t s :   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   r e g i s t e r s   c o g   w i t h   b o t 
 
 F u n c t i o n :   _ _ i n i t _ _ ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   b o t 
 D e s c r i p t i o n :   C o n s t r u c t o r   f o r   M o d e r a t i o n C o m m a n d s   c o g   c l a s s 
 I n p u t s :   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   i n i t i a l i z e s   c o g 
 
 F u n c t i o n :   s e t _ m o d e r a t i o n _ c o g ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   m o d e r a t i o n _ c o g 
 D e s c r i p t i o n :   S e t s   r e f e r e n c e   t o   t h e   m a i n   m o d e r a t i o n   c o g 
 I n p u t s :   m o d e r a t i o n _ c o g 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   s t o r e s   r e f e r e n c e 
 
 F u n c t i o n :   w a r n _ u s e r ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 D e s c r i p t i o n :   M a n u a l l y   w a r n   a   u s e r 
 I n p u t s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   w a r n _ u s e r ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   m u t e _ u s e r ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n ,   u s e r ,   d u r a t i o n ,   r e a s o n 
 D e s c r i p t i o n :   T e m p o r a r i l y   m u t e   a   u s e r   f o r   s p e c i f i e d   m i n u t e s 
 I n p u t s :   i n t e r a c t i o n ,   u s e r ,   d u r a t i o n ,   r e a s o n 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   c a l l s   a p p l y _ t e m p o r a r y _ m u t e ( ) ,   l o g s   a c t i o n 
 
 F u n c t i o n :   k i c k _ u s e r ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 D e s c r i p t i o n :   K i c k   a   u s e r   f r o m   t h e   s e r v e r 
 I n p u t s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   k i c k s   u s e r ,   l o g s   a c t i o n 
 
 F u n c t i o n :   b a n _ u s e r ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 D e s c r i p t i o n :   B a n   a   u s e r   f r o m   t h e   s e r v e r 
 I n p u t s :   i n t e r a c t i o n ,   u s e r ,   r e a s o n 
 O u t p u t s :   c o m m a n d   r e s p o n s e 
 S i d e   e f f e c t s :   b a n s   u s e r ,   l o g s   a c t i o n 
 
 F u n c t i o n :   m o d e r a t i o n _ s t a t s ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n 
 D e s c r i p t i o n :   V i e w   m o d e r a t i o n   s t a t i s t i c s   f o r   t h e   s e r v e r 
 I n p u t s :   i n t e r a c t i o n 
 O u t p u t s :   s t a t s   e m b e d 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   m o d e r a t i o n _ l o g s ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   i n t e r a c t i o n ,   p a g e 
 D e s c r i p t i o n :   V i e w   r e c e n t   m o d e r a t i o n   a c t i o n   l o g s 
 I n p u t s :   i n t e r a c t i o n ,   p a g e 
 O u t p u t s :   p a g i n a t e d   l o g s   e m b e d 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   _ i s _ r e c e n t ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   t i m e s t a m p _ s t r ,   h o u r s 
 D e s c r i p t i o n :   C h e c k   i f   t i m e s t a m p   i s   w i t h i n   t h e   l a s t   N   h o u r s 
 I n p u t s :   t i m e s t a m p _ s t r ,   h o u r s 
 O u t p u t s :   b o o l e a n 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   _ f o r m a t _ t i m e s t a m p ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   t i m e s t a m p _ s t r 
 D e s c r i p t i o n :   F o r m a t   t i m e s t a m p   f o r   d i s p l a y 
 I n p u t s :   t i m e s t a m p _ s t r 
 O u t p u t s :   f o r m a t t e d   s t r i n g 
 S i d e   e f f e c t s :   n o n e 
 
 F u n c t i o n :   s e t u p ( ) 
 F i l e :   c o g s / m o d e r a t i o n _ c o m m a n d s . p y 
 P a r a m s :   b o t 
 D e s c r i p t i o n :   S e t u p   t h e   m o d e r a t i o n   c o m m a n d s   c o g 
 I n p u t s :   b o t 
 O u t p u t s :   N o n e 
 S i d e   e f f e c t s :   r e g i s t e r s   c o g   w i t h   b o t  
 